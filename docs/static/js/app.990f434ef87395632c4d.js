(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(module,exports,__webpack_require__){var factory;window,factory=function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var _=n[r]={i:r,l:!1,exports:{}};return e[r].call(_.exports,_,_.exports,t),_.l=!0,_.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var _ in e)t.d(r,_,function(n){return e[n]}.bind(null,_));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s="./src/graphics/index.ts")}({"./node_modules/@babel/runtime/helpers/defineProperty.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/defineProperty.js ***!
  \***************************************************************/
/*! no static exports found */function(module,exports){eval("function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\n\n//# sourceURL=webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js?")},"./node_modules/_resize-observer-polyfill@1.5.1@resize-observer-polyfill/dist/ResizeObserver.es.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/_resize-observer-polyfill@1.5.1@resize-observer-polyfill/dist/ResizeObserver.es.js ***!
  \*********************************************************************************************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(global) {/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\r\n/* eslint-disable require-jsdoc, valid-jsdoc */\r\nvar MapShim = (function () {\r\n    if (typeof Map !== 'undefined') {\r\n        return Map;\r\n    }\r\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\r\n    function getIndex(arr, key) {\r\n        var result = -1;\r\n        arr.some(function (entry, index) {\r\n            if (entry[0] === key) {\r\n                result = index;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return result;\r\n    }\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            this.__entries__ = [];\r\n        }\r\n        Object.defineProperty(class_1.prototype, \"size\", {\r\n            /**\r\n             * @returns {boolean}\r\n             */\r\n            get: function () {\r\n                return this.__entries__.length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\r\n        class_1.prototype.get = function (key) {\r\n            var index = getIndex(this.__entries__, key);\r\n            var entry = this.__entries__[index];\r\n            return entry && entry[1];\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.set = function (key, value) {\r\n            var index = getIndex(this.__entries__, key);\r\n            if (~index) {\r\n                this.__entries__[index][1] = value;\r\n            }\r\n            else {\r\n                this.__entries__.push([key, value]);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.delete = function (key) {\r\n            var entries = this.__entries__;\r\n            var index = getIndex(entries, key);\r\n            if (~index) {\r\n                entries.splice(index, 1);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.has = function (key) {\r\n            return !!~getIndex(this.__entries__, key);\r\n        };\r\n        /**\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.clear = function () {\r\n            this.__entries__.splice(0);\r\n        };\r\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.forEach = function (callback, ctx) {\r\n            if (ctx === void 0) { ctx = null; }\r\n            for (var _i = 0, _a = this.__entries__; _i < _a.length; _i++) {\r\n                var entry = _a[_i];\r\n                callback.call(ctx, entry[1], entry[0]);\r\n            }\r\n        };\r\n        return class_1;\r\n    }());\r\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\r\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\r\nvar global$1 = (function () {\r\n    if (typeof global !== 'undefined' && global.Math === Math) {\r\n        return global;\r\n    }\r\n    if (typeof self !== 'undefined' && self.Math === Math) {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined' && window.Math === Math) {\r\n        return window;\r\n    }\r\n    // eslint-disable-next-line no-new-func\r\n    return Function('return this')();\r\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\r\nvar requestAnimationFrame$1 = (function () {\r\n    if (typeof requestAnimationFrame === 'function') {\r\n        // It's required to use a bounded function because IE sometimes throws\r\n        // an \"Invalid calling object\" error if rAF is invoked without the global\r\n        // object on the left hand side.\r\n        return requestAnimationFrame.bind(global$1);\r\n    }\r\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\r\n})();\n\n// Defines minimum timeout before adding a trailing call.\r\nvar trailingTimeout = 2;\r\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\r\nfunction throttle (callback, delay) {\r\n    var leadingCall = false, trailingCall = false, lastCallTime = 0;\r\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function resolvePending() {\r\n        if (leadingCall) {\r\n            leadingCall = false;\r\n            callback();\r\n        }\r\n        if (trailingCall) {\r\n            proxy();\r\n        }\r\n    }\r\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function timeoutCallback() {\r\n        requestAnimationFrame$1(resolvePending);\r\n    }\r\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function proxy() {\r\n        var timeStamp = Date.now();\r\n        if (leadingCall) {\r\n            // Reject immediately following calls.\r\n            if (timeStamp - lastCallTime < trailingTimeout) {\r\n                return;\r\n            }\r\n            // Schedule new call to be in invoked when the pending one is resolved.\r\n            // This is important for \"transitions\" which never actually start\r\n            // immediately so there is a chance that we might miss one if change\r\n            // happens amids the pending invocation.\r\n            trailingCall = true;\r\n        }\r\n        else {\r\n            leadingCall = true;\r\n            trailingCall = false;\r\n            setTimeout(timeoutCallback, delay);\r\n        }\r\n        lastCallTime = timeStamp;\r\n    }\r\n    return proxy;\r\n}\n\n// Minimum delay before invoking the update of observers.\r\nvar REFRESH_DELAY = 20;\r\n// A list of substrings of CSS properties used to find transition events that\r\n// might affect dimensions of observed elements.\r\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\r\n// Check if MutationObserver is available.\r\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\r\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\r\nvar ResizeObserverController = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserverController.\r\n     *\r\n     * @private\r\n     */\r\n    function ResizeObserverController() {\r\n        /**\r\n         * Indicates whether DOM listeners have been added.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.connected_ = false;\r\n        /**\r\n         * Tells that controller has subscribed for Mutation Events.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.mutationEventsAdded_ = false;\r\n        /**\r\n         * Keeps reference to the instance of MutationObserver.\r\n         *\r\n         * @private {MutationObserver}\r\n         */\r\n        this.mutationsObserver_ = null;\r\n        /**\r\n         * A list of connected observers.\r\n         *\r\n         * @private {Array<ResizeObserverSPI>}\r\n         */\r\n        this.observers_ = [];\r\n        this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\r\n        this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\r\n    }\r\n    /**\r\n     * Adds observer to observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be added.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.addObserver = function (observer) {\r\n        if (!~this.observers_.indexOf(observer)) {\r\n            this.observers_.push(observer);\r\n        }\r\n        // Add listeners if they haven't been added yet.\r\n        if (!this.connected_) {\r\n            this.connect_();\r\n        }\r\n    };\r\n    /**\r\n     * Removes observer from observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.removeObserver = function (observer) {\r\n        var observers = this.observers_;\r\n        var index = observers.indexOf(observer);\r\n        // Remove observer if it's present in registry.\r\n        if (~index) {\r\n            observers.splice(index, 1);\r\n        }\r\n        // Remove listeners if controller has no connected observers.\r\n        if (!observers.length && this.connected_) {\r\n            this.disconnect_();\r\n        }\r\n    };\r\n    /**\r\n     * Invokes the update of observers. It will continue running updates insofar\r\n     * it detects changes.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.refresh = function () {\r\n        var changesDetected = this.updateObservers_();\r\n        // Continue running updates if changes have been detected as there might\r\n        // be future ones caused by CSS transitions.\r\n        if (changesDetected) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Updates every observer from observers list and notifies them of queued\r\n     * entries.\r\n     *\r\n     * @private\r\n     * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n     *      dimensions of it's elements.\r\n     */\r\n    ResizeObserverController.prototype.updateObservers_ = function () {\r\n        // Collect observers that have active observations.\r\n        var activeObservers = this.observers_.filter(function (observer) {\r\n            return observer.gatherActive(), observer.hasActive();\r\n        });\r\n        // Deliver notifications in a separate cycle in order to avoid any\r\n        // collisions between observers, e.g. when multiple instances of\r\n        // ResizeObserver are tracking the same element and the callback of one\r\n        // of them changes content dimensions of the observed target. Sometimes\r\n        // this may result in notifications being blocked for the rest of observers.\r\n        activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\r\n        return activeObservers.length > 0;\r\n    };\r\n    /**\r\n     * Initializes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.connect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already added.\r\n        if (!isBrowser || this.connected_) {\r\n            return;\r\n        }\r\n        // Subscription to the \"Transitionend\" event is used as a workaround for\r\n        // delayed transitions. This way it's possible to capture at least the\r\n        // final state of an element.\r\n        document.addEventListener('transitionend', this.onTransitionEnd_);\r\n        window.addEventListener('resize', this.refresh);\r\n        if (mutationObserverSupported) {\r\n            this.mutationsObserver_ = new MutationObserver(this.refresh);\r\n            this.mutationsObserver_.observe(document, {\r\n                attributes: true,\r\n                childList: true,\r\n                characterData: true,\r\n                subtree: true\r\n            });\r\n        }\r\n        else {\r\n            document.addEventListener('DOMSubtreeModified', this.refresh);\r\n            this.mutationEventsAdded_ = true;\r\n        }\r\n        this.connected_ = true;\r\n    };\r\n    /**\r\n     * Removes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.disconnect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already removed.\r\n        if (!isBrowser || !this.connected_) {\r\n            return;\r\n        }\r\n        document.removeEventListener('transitionend', this.onTransitionEnd_);\r\n        window.removeEventListener('resize', this.refresh);\r\n        if (this.mutationsObserver_) {\r\n            this.mutationsObserver_.disconnect();\r\n        }\r\n        if (this.mutationEventsAdded_) {\r\n            document.removeEventListener('DOMSubtreeModified', this.refresh);\r\n        }\r\n        this.mutationsObserver_ = null;\r\n        this.mutationEventsAdded_ = false;\r\n        this.connected_ = false;\r\n    };\r\n    /**\r\n     * \"Transitionend\" event handler.\r\n     *\r\n     * @private\r\n     * @param {TransitionEvent} event\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.onTransitionEnd_ = function (_a) {\r\n        var _b = _a.propertyName, propertyName = _b === void 0 ? '' : _b;\r\n        // Detect whether transition may affect dimensions of an element.\r\n        var isReflowProperty = transitionKeys.some(function (key) {\r\n            return !!~propertyName.indexOf(key);\r\n        });\r\n        if (isReflowProperty) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Returns instance of the ResizeObserverController.\r\n     *\r\n     * @returns {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.getInstance = function () {\r\n        if (!this.instance_) {\r\n            this.instance_ = new ResizeObserverController();\r\n        }\r\n        return this.instance_;\r\n    };\r\n    /**\r\n     * Holds reference to the controller's instance.\r\n     *\r\n     * @private {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.instance_ = null;\r\n    return ResizeObserverController;\r\n}());\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\r\nvar defineConfigurable = (function (target, props) {\r\n    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        Object.defineProperty(target, key, {\r\n            value: props[key],\r\n            enumerable: false,\r\n            writable: false,\r\n            configurable: true\r\n        });\r\n    }\r\n    return target;\r\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\r\nvar getWindowOf = (function (target) {\r\n    // Assume that the element is an instance of Node, which means that it\r\n    // has the \"ownerDocument\" property from which we can retrieve a\r\n    // corresponding global object.\r\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\r\n    // Return the local global object if it's not possible extract one from\r\n    // provided element.\r\n    return ownerGlobal || global$1;\r\n});\n\n// Placeholder of an empty content rectangle.\r\nvar emptyRect = createRectInit(0, 0, 0, 0);\r\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\r\nfunction toFloat(value) {\r\n    return parseFloat(value) || 0;\r\n}\r\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\r\nfunction getBordersSize(styles) {\r\n    var positions = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        positions[_i - 1] = arguments[_i];\r\n    }\r\n    return positions.reduce(function (size, position) {\r\n        var value = styles['border-' + position + '-width'];\r\n        return size + toFloat(value);\r\n    }, 0);\r\n}\r\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\r\nfunction getPaddings(styles) {\r\n    var positions = ['top', 'right', 'bottom', 'left'];\r\n    var paddings = {};\r\n    for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\r\n        var position = positions_1[_i];\r\n        var value = styles['padding-' + position];\r\n        paddings[position] = toFloat(value);\r\n    }\r\n    return paddings;\r\n}\r\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getSVGContentRect(target) {\r\n    var bbox = target.getBBox();\r\n    return createRectInit(0, 0, bbox.width, bbox.height);\r\n}\r\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getHTMLElementContentRect(target) {\r\n    // Client width & height properties can't be\r\n    // used exclusively as they provide rounded values.\r\n    var clientWidth = target.clientWidth, clientHeight = target.clientHeight;\r\n    // By this condition we can catch all non-replaced inline, hidden and\r\n    // detached elements. Though elements with width & height properties less\r\n    // than 0.5 will be discarded as well.\r\n    //\r\n    // Without it we would need to implement separate methods for each of\r\n    // those cases and it's not possible to perform a precise and performance\r\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\r\n    // gives wrong results for elements with width & height less than 0.5.\r\n    if (!clientWidth && !clientHeight) {\r\n        return emptyRect;\r\n    }\r\n    var styles = getWindowOf(target).getComputedStyle(target);\r\n    var paddings = getPaddings(styles);\r\n    var horizPad = paddings.left + paddings.right;\r\n    var vertPad = paddings.top + paddings.bottom;\r\n    // Computed styles of width & height are being used because they are the\r\n    // only dimensions available to JS that contain non-rounded values. It could\r\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\r\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\r\n    var width = toFloat(styles.width), height = toFloat(styles.height);\r\n    // Width & height include paddings and borders when the 'border-box' box\r\n    // model is applied (except for IE).\r\n    if (styles.boxSizing === 'border-box') {\r\n        // Following conditions are required to handle Internet Explorer which\r\n        // doesn't include paddings and borders to computed CSS dimensions.\r\n        //\r\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\r\n        // properties then it's either IE, and thus we don't need to subtract\r\n        // anything, or an element merely doesn't have paddings/borders styles.\r\n        if (Math.round(width + horizPad) !== clientWidth) {\r\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\r\n        }\r\n        if (Math.round(height + vertPad) !== clientHeight) {\r\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\r\n        }\r\n    }\r\n    // Following steps can't be applied to the document's root element as its\r\n    // client[Width/Height] properties represent viewport area of the window.\r\n    // Besides, it's as well not necessary as the <html> itself neither has\r\n    // rendered scroll bars nor it can be clipped.\r\n    if (!isDocumentElement(target)) {\r\n        // In some browsers (only in Firefox, actually) CSS width & height\r\n        // include scroll bars size which can be removed at this step as scroll\r\n        // bars are the only difference between rounded dimensions + paddings\r\n        // and \"client\" properties, though that is not always true in Chrome.\r\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\r\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\r\n        // Chrome has a rather weird rounding of \"client\" properties.\r\n        // E.g. for an element with content width of 314.2px it sometimes gives\r\n        // the client width of 315px and for the width of 314.7px it may give\r\n        // 314px. And it doesn't happen all the time. So just ignore this delta\r\n        // as a non-relevant.\r\n        if (Math.abs(vertScrollbar) !== 1) {\r\n            width -= vertScrollbar;\r\n        }\r\n        if (Math.abs(horizScrollbar) !== 1) {\r\n            height -= horizScrollbar;\r\n        }\r\n    }\r\n    return createRectInit(paddings.left, paddings.top, width, height);\r\n}\r\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nvar isSVGGraphicsElement = (function () {\r\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\r\n    // interface.\r\n    if (typeof SVGGraphicsElement !== 'undefined') {\r\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\r\n    }\r\n    // If it's so, then check that element is at least an instance of the\r\n    // SVGElement and that it has the \"getBBox\" method.\r\n    // eslint-disable-next-line no-extra-parens\r\n    return function (target) { return (target instanceof getWindowOf(target).SVGElement &&\r\n        typeof target.getBBox === 'function'); };\r\n})();\r\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nfunction isDocumentElement(target) {\r\n    return target === getWindowOf(target).document.documentElement;\r\n}\r\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getContentRect(target) {\r\n    if (!isBrowser) {\r\n        return emptyRect;\r\n    }\r\n    if (isSVGGraphicsElement(target)) {\r\n        return getSVGContentRect(target);\r\n    }\r\n    return getHTMLElementContentRect(target);\r\n}\r\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\r\nfunction createReadOnlyRect(_a) {\r\n    var x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\r\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\r\n    var rect = Object.create(Constr.prototype);\r\n    // Rectangle's properties are not writable and non-enumerable.\r\n    defineConfigurable(rect, {\r\n        x: x, y: y, width: width, height: height,\r\n        top: y,\r\n        right: x + width,\r\n        bottom: height + y,\r\n        left: x\r\n    });\r\n    return rect;\r\n}\r\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction createRectInit(x, y, width, height) {\r\n    return { x: x, y: y, width: width, height: height };\r\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\r\nvar ResizeObservation = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObservation.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     */\r\n    function ResizeObservation(target) {\r\n        /**\r\n         * Broadcasted width of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastWidth = 0;\r\n        /**\r\n         * Broadcasted height of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastHeight = 0;\r\n        /**\r\n         * Reference to the last observed content rectangle.\r\n         *\r\n         * @private {DOMRectInit}\r\n         */\r\n        this.contentRect_ = createRectInit(0, 0, 0, 0);\r\n        this.target = target;\r\n    }\r\n    /**\r\n     * Updates content rectangle and tells whether it's width or height properties\r\n     * have changed since the last broadcast.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObservation.prototype.isActive = function () {\r\n        var rect = getContentRect(this.target);\r\n        this.contentRect_ = rect;\r\n        return (rect.width !== this.broadcastWidth ||\r\n            rect.height !== this.broadcastHeight);\r\n    };\r\n    /**\r\n     * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n     * from the corresponding properties of the last observed content rectangle.\r\n     *\r\n     * @returns {DOMRectInit} Last observed content rectangle.\r\n     */\r\n    ResizeObservation.prototype.broadcastRect = function () {\r\n        var rect = this.contentRect_;\r\n        this.broadcastWidth = rect.width;\r\n        this.broadcastHeight = rect.height;\r\n        return rect;\r\n    };\r\n    return ResizeObservation;\r\n}());\n\nvar ResizeObserverEntry = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObserverEntry.\r\n     *\r\n     * @param {Element} target - Element that is being observed.\r\n     * @param {DOMRectInit} rectInit - Data of the element's content rectangle.\r\n     */\r\n    function ResizeObserverEntry(target, rectInit) {\r\n        var contentRect = createReadOnlyRect(rectInit);\r\n        // According to the specification following properties are not writable\r\n        // and are also not enumerable in the native implementation.\r\n        //\r\n        // Property accessors are not being used as they'd require to define a\r\n        // private WeakMap storage which may cause memory leaks in browsers that\r\n        // don't support this type of collections.\r\n        defineConfigurable(this, { target: target, contentRect: contentRect });\r\n    }\r\n    return ResizeObserverEntry;\r\n}());\n\nvar ResizeObserverSPI = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback function that is invoked\r\n     *      when one of the observed elements changes it's content dimensions.\r\n     * @param {ResizeObserverController} controller - Controller instance which\r\n     *      is responsible for the updates of observer.\r\n     * @param {ResizeObserver} callbackCtx - Reference to the public\r\n     *      ResizeObserver instance which will be passed to callback function.\r\n     */\r\n    function ResizeObserverSPI(callback, controller, callbackCtx) {\r\n        /**\r\n         * Collection of resize observations that have detected changes in dimensions\r\n         * of elements.\r\n         *\r\n         * @private {Array<ResizeObservation>}\r\n         */\r\n        this.activeObservations_ = [];\r\n        /**\r\n         * Registry of the ResizeObservation instances.\r\n         *\r\n         * @private {Map<Element, ResizeObservation>}\r\n         */\r\n        this.observations_ = new MapShim();\r\n        if (typeof callback !== 'function') {\r\n            throw new TypeError('The callback provided as parameter 1 is not a function.');\r\n        }\r\n        this.callback_ = callback;\r\n        this.controller_ = controller;\r\n        this.callbackCtx_ = callbackCtx;\r\n    }\r\n    /**\r\n     * Starts observing provided element.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.observe = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is already being observed.\r\n        if (observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.set(target, new ResizeObservation(target));\r\n        this.controller_.addObserver(this);\r\n        // Force the update of observations.\r\n        this.controller_.refresh();\r\n    };\r\n    /**\r\n     * Stops observing provided element.\r\n     *\r\n     * @param {Element} target - Element to stop observing.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.unobserve = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is not being observed.\r\n        if (!observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.delete(target);\r\n        if (!observations.size) {\r\n            this.controller_.removeObserver(this);\r\n        }\r\n    };\r\n    /**\r\n     * Stops observing all elements.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.disconnect = function () {\r\n        this.clearActive();\r\n        this.observations_.clear();\r\n        this.controller_.removeObserver(this);\r\n    };\r\n    /**\r\n     * Collects observation instances the associated element of which has changed\r\n     * it's content rectangle.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.gatherActive = function () {\r\n        var _this = this;\r\n        this.clearActive();\r\n        this.observations_.forEach(function (observation) {\r\n            if (observation.isActive()) {\r\n                _this.activeObservations_.push(observation);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Invokes initial callback function with a list of ResizeObserverEntry\r\n     * instances collected from active resize observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.broadcastActive = function () {\r\n        // Do nothing if observer doesn't have active observations.\r\n        if (!this.hasActive()) {\r\n            return;\r\n        }\r\n        var ctx = this.callbackCtx_;\r\n        // Create ResizeObserverEntry instance for every active observation.\r\n        var entries = this.activeObservations_.map(function (observation) {\r\n            return new ResizeObserverEntry(observation.target, observation.broadcastRect());\r\n        });\r\n        this.callback_.call(ctx, entries, ctx);\r\n        this.clearActive();\r\n    };\r\n    /**\r\n     * Clears the collection of active observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.clearActive = function () {\r\n        this.activeObservations_.splice(0);\r\n    };\r\n    /**\r\n     * Tells whether observer has active observations.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObserverSPI.prototype.hasActive = function () {\r\n        return this.activeObservations_.length > 0;\r\n    };\r\n    return ResizeObserverSPI;\r\n}());\n\n// Registry of internal observers. If WeakMap is not available use current shim\r\n// for the Map collection as it has all required methods and because WeakMap\r\n// can't be fully polyfilled anyway.\r\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\r\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\r\nvar ResizeObserver = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback that is invoked when\r\n     *      dimensions of the observed elements change.\r\n     */\r\n    function ResizeObserver(callback) {\r\n        if (!(this instanceof ResizeObserver)) {\r\n            throw new TypeError('Cannot call a class as a function.');\r\n        }\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        var controller = ResizeObserverController.getInstance();\r\n        var observer = new ResizeObserverSPI(callback, controller, this);\r\n        observers.set(this, observer);\r\n    }\r\n    return ResizeObserver;\r\n}());\r\n// Expose public methods of ResizeObserver.\r\n[\r\n    'observe',\r\n    'unobserve',\r\n    'disconnect'\r\n].forEach(function (method) {\r\n    ResizeObserver.prototype[method] = function () {\r\n        var _a;\r\n        return (_a = observers.get(this))[method].apply(_a, arguments);\r\n    };\r\n});\n\nvar index = (function () {\r\n    // Export existing implementation if available.\r\n    if (typeof global$1.ResizeObserver !== 'undefined') {\r\n        return global$1.ResizeObserver;\r\n    }\r\n    return ResizeObserver;\r\n})();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (index);\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack:///./node_modules/_resize-observer-polyfill@1.5.1@resize-observer-polyfill/dist/ResizeObserver.es.js?")},"./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/src/index.js!./node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./src/graphics/contextMenu/style.less":
/*!*****************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??ref--8-1!./node_modules/postcss-loader/src!./node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./src/graphics/contextMenu/style.less ***!
  \*****************************************************************************************************************************************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('exports = module.exports = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js")(false);\n// Module\nexports.push([module.i, ".style-18Hmg {\\n  background: white;\\n  position: fixed;\\n  width: 160px;\\n  min-height: 160px;\\n  border-radius: 5px;\\n  z-index: 9999;\\n  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\\n  border: 1px solid rgba(0, 0, 0, 0.15);\\n  font-size: 14px;\\n  padding: 10px 0;\\n  color: #666;\\n}\\n.style-18Hmg .item {\\n  height: 26px;\\n  line-height: 26px;\\n  padding: 3px 20px;\\n  cursor: pointer;\\n}\\n.style-18Hmg .item:hover {\\n  background: #f6f6f6;\\n  color: #0796e9;\\n}\\n", ""]);\n\n// Exports\nexports.locals = {\n\t"menu": "style-18Hmg"\n};\n\n//# sourceURL=webpack:///./src/graphics/contextMenu/style.less?./node_modules/css-loader/dist/cjs.js??ref--8-1!./node_modules/postcss-loader/src!./node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js')},"./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/src/index.js!./node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./src/graphics/core/canvas.less":
/*!***********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??ref--8-1!./node_modules/postcss-loader/src!./node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./src/graphics/core/canvas.less ***!
  \***********************************************************************************************************************************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('exports = module.exports = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js")(false);\n// Module\nexports.push([module.i, ".canvas-1iCxA {\\n  width: 100%;\\n  height: 100%;\\n  position: relative;\\n}\\n.canvas-1iCxA > div,\\n.canvas-1iCxA canvas {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  top: 0;\\n  left: 0;\\n  overflow: hidden;\\n}\\n.canvas-1iCxA .hidden {\\n  display: none !important;\\n}\\n", ""]);\n\n// Exports\nexports.locals = {\n\t"topology": "canvas-1iCxA"\n};\n\n//# sourceURL=webpack:///./src/graphics/core/canvas.less?./node_modules/css-loader/dist/cjs.js??ref--8-1!./node_modules/postcss-loader/src!./node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js')},"./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";eval("\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return '@media ' + item[2] + '{' + content + '}';\n      } else {\n        return content;\n      }\n    }).join('');\n  }; // import a list of modules into the list\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (i = 0; i < modules.length; i++) {\n      var item = modules[i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = '(' + item[2] + ') and (' + mediaQuery + ')';\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || '';\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n  return '/*# ' + data + ' */';\n}\n\n//# sourceURL=webpack:///./node_modules/css-loader/dist/runtime/api.js?")},"./node_modules/style-loader/lib/addStyles.js":
/*!****************************************************!*\
  !*** ./node_modules/style-loader/lib/addStyles.js ***!
  \****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === "undefined") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve "head" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector("#foo").shadowRoot }\n                // }\n                if (typeof target === \'function\') {\n                        return target();\n                }\n                if (typeof memo[target] === "undefined") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = __webpack_require__(/*! ./urls */ "./node_modules/style-loader/lib/urls.js");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== "undefined" && DEBUG) {\n\t\tif (typeof document !== "object") throw new Error("The style-loader cannot be used in a non-browser environment");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === "object" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== "boolean") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = "head";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = "bottom";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error("Couldn\'t find a style target. This probably means that the value for the \'insertInto\' parameter is invalid.");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === "top") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === "bottom") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === "object" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error("[Style Loader]\\n\\n Invalid value for parameter \'insertAt\' (\'options.insertAt\') found.\\n Must be \'top\', \'bottom\', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement("style");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = "text/css";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement("link");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = "text/css";\n\t}\n\toptions.attrs.rel = "stylesheet";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (false) {}\n\n\treturn __webpack_require__.nc;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === \'function\'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don\'t add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === "function" &&\n\t\ttypeof URL.createObjectURL === "function" &&\n\t\ttypeof URL.revokeObjectURL === "function" &&\n\t\ttypeof Blob === "function" &&\n\t\ttypeof btoa === "function"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join(\'\\n\');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? "" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute("media", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn\'t defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += "\\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + " */";\n\t}\n\n\tvar blob = new Blob([css], { type: "text/css" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n//# sourceURL=webpack:///./node_modules/style-loader/lib/addStyles.js?')},"./node_modules/style-loader/lib/urls.js":
/*!***********************************************!*\
  !*** ./node_modules/style-loader/lib/urls.js ***!
  \***********************************************/
/*! no static exports found */function(module,exports){eval('\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function "fixes" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== "undefined" && window.location;\n\n  if (!location) {\n    throw new Error("fixUrls requires window.location");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== "string") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + "//" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, "/");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word "url" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn\'t a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn\'t a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn\'t a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^"(.*)"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^\'(.*)\'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf("//") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf("/") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with \'/\'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, ""); // Strip leading \'./\'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn "url(" + JSON.stringify(newUrl) + ")";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n//# sourceURL=webpack:///./node_modules/style-loader/lib/urls.js?')},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */function(module,exports){eval('var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function("return this")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === "object") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it\'s\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n//# sourceURL=webpack:///(webpack)/buildin/global.js?')},"./src/graphics/config/config.ts":
/*!***************************************!*\
  !*** ./src/graphics/config/config.ts ***!
  \***************************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  createLineOptions: {\n    arrow: true,\n    text: ''\n  }\n});\n\n//# sourceURL=webpack:///./src/graphics/config/config.ts?")},"./src/graphics/contextMenu/ContextMenu.ts":
/*!*************************************************!*\
  !*** ./src/graphics/contextMenu/ContextMenu.ts ***!
  \*************************************************/
/*! exports provided: ContextMenu, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextMenu", function() { return ContextMenu; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _style_less__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./style.less */ "./src/graphics/contextMenu/style.less");\n/* harmony import */ var _style_less__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_style_less__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n\n\n\nconst menu = [{\n  label: \'放大\',\n  command: \'zoomIn\'\n}, {\n  label: \'缩小\',\n  command: \'zoomOut\'\n}];\nclass ContextMenu {\n  constructor(canvas) {\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "mouseX", 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "mouseY", 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "canvas", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "mounted", false);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "container", document.createElement(\'div\'));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "menu", menu);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "handleClick", e => {\n      e.stopPropagation();\n      const target = e.target;\n      if (!target) return;\n      if (target === this.container) return;\n      const command = target.dataset.command;\n\n      switch (command) {\n        case \'zoomIn\':\n          this.canvas.zoomIn(new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["Vector2d"](this.mouseX, this.mouseY));\n          break;\n\n        case \'zoomOut\':\n          this.canvas.zoomOut(new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["Vector2d"](this.mouseX, this.mouseY));\n          break;\n\n        default:\n          this.canvas.eventEmitter.emit(\'canvas:menu\', command);\n      }\n\n      this.hide();\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "handleDocumentClick", e => {\n      this.hide();\n    });\n\n    this.canvas = canvas;\n    this.container.className = _style_less__WEBPACK_IMPORTED_MODULE_1___default.a.menu;\n    this.container.addEventListener(\'click\', this.handleClick);\n    document.addEventListener(\'click\', this.handleDocumentClick);\n  }\n\n  destroy() {\n    this.container.removeEventListener(\'click\', this.handleClick);\n    document.removeEventListener(\'click\', this.handleDocumentClick);\n    this.unmount();\n  }\n\n  show(x, y) {\n    this.mouseX = x;\n    this.mouseY = y;\n    let left = x;\n    let top = y;\n    Object.assign(this.container.style, {\n      left: `${left}px`,\n      top: `${top}px`\n    });\n    this.mount();\n  }\n\n  hide() {\n    this.unmount();\n  }\n\n  mount() {\n    if (this.mounted) return;\n    const menuList = [...this.menu];\n    const html = menuList.map(item => {\n      return `<div class="item" data-command="${item.command}">${item.label}</div>`;\n    });\n    this.container.innerHTML = html.join(\'\');\n    document.body.appendChild(this.container);\n    this.mounted = true;\n  }\n\n  unmount() {\n    if (!this.mounted) return;\n    document.body.removeChild(this.container);\n    this.mounted = false;\n  }\n\n}\n/* harmony default export */ __webpack_exports__["default"] = (ContextMenu);\n\n//# sourceURL=webpack:///./src/graphics/contextMenu/ContextMenu.ts?')},"./src/graphics/contextMenu/style.less":
/*!*********************************************!*\
  !*** ./src/graphics/contextMenu/style.less ***!
  \*********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\nvar content = __webpack_require__(/*! !../../../node_modules/css-loader/dist/cjs.js??ref--8-1!../../../node_modules/postcss-loader/src!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./style.less */ "./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/src/index.js!./node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./src/graphics/contextMenu/style.less");\n\nif(typeof content === \'string\') content = [[module.i, content, \'\']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {"hmr":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../node_modules/style-loader/lib/addStyles.js */ "./node_modules/style-loader/lib/addStyles.js")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n//# sourceURL=webpack:///./src/graphics/contextMenu/style.less?')},"./src/graphics/core/Canvas.ts":
/*!*************************************!*\
  !*** ./src/graphics/core/Canvas.ts ***!
  \*************************************/
/*! exports provided: Canvas, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Canvas", function() { return Canvas; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _contextMenu_ContextMenu__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../contextMenu/ContextMenu */ "./src/graphics/contextMenu/ContextMenu.ts");\n/* harmony import */ var _events_eventEmitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../events/eventEmitter */ "./src/graphics/events/eventEmitter.ts");\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n/* harmony import */ var _graph_CanvasNode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../graph/CanvasNode */ "./src/graphics/graph/CanvasNode.ts");\n/* harmony import */ var _graph_DomNode__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../graph/DomNode */ "./src/graphics/graph/DomNode.ts");\n/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/utils */ "./src/graphics/utils/utils.ts");\n/* harmony import */ var resize_observer_polyfill__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! resize-observer-polyfill */ "./node_modules/_resize-observer-polyfill@1.5.1@resize-observer-polyfill/dist/ResizeObserver.es.js");\n/* harmony import */ var _graph_VirtualNode__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../graph/VirtualNode */ "./src/graphics/graph/VirtualNode.ts");\n/* harmony import */ var _mode_modes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../mode/modes */ "./src/graphics/mode/modes.ts");\n/* harmony import */ var _canvas_less__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./canvas.less */ "./src/graphics/core/canvas.less");\n/* harmony import */ var _canvas_less__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_canvas_less__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _config_config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../config/config */ "./src/graphics/config/config.ts");\n\n\n\n\n\n\n\n\n\n\n\n\nclass Canvas {\n  /**\r\n   * 注册模式\r\n   * @param modeName \r\n   * @param interactions \r\n   */\n  static registerMode(modeName, interactions) {\n    _mode_modes__WEBPACK_IMPORTED_MODULE_9__["default"].registerMode(modeName, interactions);\n  }\n\n  constructor(options) {\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "mounted", false);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_running", false);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_animationFrameId", 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "name", \'application\');\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "eventEmitter", _events_eventEmitter__WEBPACK_IMPORTED_MODULE_2__["globalEvent"]);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "nativeEvent", null);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "optimize", true);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "interactionMode", _mode_modes__WEBPACK_IMPORTED_MODULE_9__["MODE_DEFAULT"]);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "container", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "wrapper", document.createElement(\'div\'));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "containerClientRect", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "graphCanvas", document.createElement(\'canvas\'));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "graphCanvasCtx", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "domCanvas", document.createElement(\'div\'));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "topCanvas", document.createElement(\'canvas\'));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "topCanvasMounted", false);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "topCanvasCtx", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "virtualNode", new _graph_VirtualNode__WEBPACK_IMPORTED_MODULE_8__["default"]({\n      x: 0,\n      y: 0,\n      id: \'vn\'\n    }));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "mousedownPosition", new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["Vector2d"](0, 0));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "mouseupPosition", new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["Vector2d"](0, 0));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "mousemovePosition", new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["Vector2d"](0, 0));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "ro", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "viewWidth", 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "viewHeight", 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "canvasWidth", 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "canvasHeight", 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "canvasScale", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "maxScale", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "minScale", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "repaint", false);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "contextMenu", new _contextMenu_ContextMenu__WEBPACK_IMPORTED_MODULE_1__["ContextMenu"](this));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "rootNode", new _graph_VirtualNode__WEBPACK_IMPORTED_MODULE_8__["default"]({\n      x: 0,\n      y: 0,\n      id: \'rootNode\'\n    }));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "handleClick", e => {\n      this.nativeEvent = e;\n      const interactions = _mode_modes__WEBPACK_IMPORTED_MODULE_9__["default"].use(this.interactionMode);\n\n      if (interactions) {\n        interactions.forEach(action => {\n          action.onClick(this, e);\n        });\n      }\n\n      this.eventEmitter.emit(\'canvas:click\', e);\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "handleDblClick", e => {\n      this.nativeEvent = e;\n      const interactions = _mode_modes__WEBPACK_IMPORTED_MODULE_9__["default"].use(this.interactionMode);\n\n      if (interactions) {\n        interactions.forEach(action => {\n          action.onDblClick(this, e);\n        });\n      }\n\n      this.eventEmitter.emit(\'canvas:dblclick\');\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "handleWheel", e => {\n      const interactions = _mode_modes__WEBPACK_IMPORTED_MODULE_9__["default"].use(this.interactionMode);\n\n      if (interactions) {\n        interactions.forEach(action => {\n          action.onWheel(this, e);\n        });\n      }\n\n      this.eventEmitter.emit(\'canvas:wheel\', e);\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "handleMouseDown", e => {\n      this.nativeEvent = e;\n      this.mousedownPosition = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["Vector2d"](e.clientX, e.clientY);\n      const interactions = _mode_modes__WEBPACK_IMPORTED_MODULE_9__["default"].use(this.interactionMode);\n\n      if (interactions) {\n        interactions.forEach(action => {\n          action.onMouseDown(this, e);\n        });\n      }\n\n      this.eventEmitter.emit(\'canvas:mousedown\', e);\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "handleMouseMove", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["throttle"])(e => {\n      this.nativeEvent = e;\n      this.mousemovePosition = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["Vector2d"](e.clientX, e.clientY);\n      const interactions = _mode_modes__WEBPACK_IMPORTED_MODULE_9__["default"].use(this.interactionMode);\n\n      if (interactions) {\n        interactions.forEach(action => {\n          action.onMouseMove(this, e);\n        });\n      }\n\n      this.optimizeNode();\n      this.eventEmitter.emit(\'canvas:mousemove\', e);\n    }));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "handleMouseUp", e => {\n      this.nativeEvent = e;\n      this.mouseupPosition = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["Vector2d"](e.clientX, e.clientY);\n      const interactions = _mode_modes__WEBPACK_IMPORTED_MODULE_9__["default"].use(this.interactionMode);\n\n      if (interactions) {\n        interactions.forEach(action => {\n          action.onMouseUp(this, e);\n        });\n      }\n\n      this.eventEmitter.emit(\'canvas:mouseup\', e);\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "handleDragOver", e => {\n      const interactions = _mode_modes__WEBPACK_IMPORTED_MODULE_9__["default"].use(this.interactionMode);\n\n      if (interactions) {\n        interactions.forEach(action => {\n          action.onDragOver(this, e);\n        });\n      }\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "handleDrop", e => {\n      const interactions = _mode_modes__WEBPACK_IMPORTED_MODULE_9__["default"].use(this.interactionMode);\n\n      if (interactions) {\n        interactions.forEach(action => {\n          action.onDrop(this, e);\n        });\n      }\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "handleContextMenu", e => {\n      e.preventDefault();\n      const interactions = _mode_modes__WEBPACK_IMPORTED_MODULE_9__["default"].use(this.interactionMode);\n\n      if (interactions) {\n        interactions.forEach(action => {\n          action.onContextMenu(this, e);\n        });\n      }\n    });\n\n    this.container = options.container;\n    this.wrapper.className = _canvas_less__WEBPACK_IMPORTED_MODULE_10___default.a.topology;\n    this.graphCanvasCtx = this.graphCanvas.getContext(\'2d\');\n    this.topCanvasCtx = this.topCanvas.getContext(\'2d\');\n    this.canvasScale = options.scale || 1;\n    this.maxScale = options.maxScale || 5;\n    this.minScale = options.minScale || 0.1;\n    this.rootNode.canvas = this;\n    this.ro = new resize_observer_polyfill__WEBPACK_IMPORTED_MODULE_7__["default"]((entries, observer) => {\n      for (const entry of entries) {\n        const {\n          width,\n          height\n        } = entry.contentRect;\n        this.viewWidth = width;\n        this.viewHeight = height;\n        this.canvasWidth = width / this.canvasScale;\n        this.canvasHeight = height / this.canvasScale;\n        this.containerClientRect = this.container.getBoundingClientRect();\n      }\n\n      this.mount();\n      this.render();\n      this.optimizeNode();\n      this.repaint = true;\n    });\n    this.ro.observe(this.container);\n    this.nativeEventInit();\n    this.globalEventInit();\n    this.setMode(options.mode || _mode_modes__WEBPACK_IMPORTED_MODULE_9__["MODE_DEFAULT"]);\n  }\n  /**\r\n   * 设置缩放\r\n   * @param scale \r\n   */\n\n\n  setZoom(scale) {\n    this.canvasScale = scale;\n    this.canvasWidth = this.viewWidth / this.canvasScale;\n    this.canvasHeight = this.viewHeight / this.canvasScale;\n    this.render();\n    this.optimizeNode();\n    this.repaint = true;\n  } // 原生事件监听\n\n\n  nativeEventInit() {\n    this.wrapper.addEventListener(\'click\', this.handleClick);\n    this.wrapper.addEventListener(\'dblclick\', this.handleDblClick);\n    this.wrapper.addEventListener(\'mousedown\', this.handleMouseDown);\n    this.wrapper.addEventListener(\'wheel\', this.handleWheel);\n    this.wrapper.addEventListener(\'dragover\', this.handleDragOver);\n    this.wrapper.addEventListener(\'drop\', this.handleDrop);\n    this.wrapper.addEventListener(\'contextmenu\', this.handleContextMenu);\n    document.addEventListener(\'mousemove\', this.handleMouseMove);\n    document.addEventListener(\'mouseup\', this.handleMouseUp);\n  } // 全局事件监听\n\n\n  globalEventInit() {}\n  /**\r\n   * 销毁\r\n   */\n\n\n  destroy() {\n    this.wrapper.removeEventListener(\'click\', this.handleClick);\n    this.wrapper.removeEventListener(\'mousedown\', this.handleMouseDown);\n    this.wrapper.removeEventListener(\'wheel\', this.handleWheel);\n    this.wrapper.removeEventListener(\'dragover\', this.handleDragOver);\n    this.wrapper.removeEventListener(\'drop\', this.handleDrop);\n    document.removeEventListener(\'mousemove\', this.handleMouseMove);\n    document.removeEventListener(\'mouseup\', this.handleMouseUp);\n    this.ro.unobserve(this.container);\n    this.ro.disconnect();\n    this.unmount();\n    this.removeAllNode();\n  }\n  /**\r\n   * 添加节点\r\n   * @param node \r\n   */\n\n\n  addNode(node) {\n    if (this.rootNode.hasChild(node)) return;\n    node.visible = node.isInRect(this.canvasVisibleRect);\n    this.rootNode.addChild(node); // node.render()\n\n    this.repaint = true;\n  }\n  /**\r\n   * 将节点置顶显示\r\n   * @param node \r\n   */\n\n\n  setNodeTop(node) {\n    const parent = node.parent;\n    if (!parent) return;\n    const zIndex = parent.lastChild && parent.lastChild.zIndex || 0;\n    node.zIndex = Math.max(zIndex, node.zIndex);\n    parent.removeChild(node, false);\n    parent.addChild(node);\n\n    if (node instanceof _graph_DomNode__WEBPACK_IMPORTED_MODULE_5__["DomNode"]) {\n      node.unmount();\n      node.mount();\n    }\n\n    this.repaint = true;\n  }\n  /**\r\n   * 获取激活状态的节点列表\r\n   */\n\n\n  getActiveNodes() {\n    return this.rootNode.getActiveDescendant();\n  }\n  /**\r\n   * 删除节点\r\n   * @param node \r\n   * @param destroy 是否销毁,默认true\r\n   */\n\n\n  removeNode(node, destroy = true) {\n    if (!this.rootNode.hasDescendant(node)) return;\n    if (!node.parent) return;\n    node.parent.removeChild(node, destroy); // 把相连的edge也删掉\n\n    const edges = [...node.edges];\n    edges.forEach(edge => {\n      this.removeEdge(edge);\n    });\n    this.repaint = true;\n  }\n  /**\r\n   * 删除所有节点\r\n   * @param destroy 是否销毁,默认true\r\n   */\n\n\n  removeAllNode(destroy = true) {\n    this.rootNode.removeAllChild(destroy);\n  }\n  /**\r\n   * 添加边线\r\n   * @param edge \r\n   */\n\n\n  addEdge(edge) {\n    edge.sourceNode.addEdge(edge);\n    edge.targetNode.addEdge(edge);\n    edge.canvas = this;\n    this.repaint = true;\n  }\n  /**\r\n   * 删除边线\r\n   * @param edge \r\n   */\n\n\n  removeEdge(edge) {\n    edge.sourceNode.removeEdge(edge);\n    edge.targetNode.removeEdge(edge);\n    edge.canvas = undefined;\n    this.repaint = true;\n  }\n  /**\r\n   * 获取激活状态的边线列表\r\n   */\n\n\n  getActiveEdges() {\n    const activeEdges = [];\n    const sign = Math.random();\n    this.rootNode.getDescendantBF(node => {\n      node.edges.forEach(edge => {\n        if (edge.renderSign === sign) return;\n        edge.renderSign = sign;\n\n        if (edge.active) {\n          activeEdges.push(edge);\n        }\n      });\n    });\n    return activeEdges;\n  }\n  /**\r\n   * 将视口坐标转换成画布坐标。注：不考虑缩放\r\n   * @param coordinate 鼠标位于视口的坐标\r\n   */\n\n\n  viewportToCanvasCoordinate(coordinate) {\n    if (!this.containerClientRect) {\n      this.containerClientRect = this.container.getBoundingClientRect();\n    }\n\n    const {\n      top,\n      left\n    } = this.containerClientRect;\n    return coordinate.clone().substract(new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["Vector2d"](left, top));\n  }\n  /**\r\n   * 画布坐标转换成视口坐标\r\n   * @param coordinate \r\n   */\n\n\n  canvasToViewportCoordinate(coordinate) {\n    if (!this.containerClientRect) {\n      this.containerClientRect = this.container.getBoundingClientRect();\n    }\n\n    const {\n      top,\n      left\n    } = this.containerClientRect;\n    return coordinate.clone().add(new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["Vector2d"](left, top));\n  }\n  /**\r\n   * 将画布坐标转换成像素坐标\r\n   * @param coordinate 画布坐标\r\n   */\n\n\n  canvasToPixelCoordinate(coordinate) {\n    return coordinate.clone().scale(1 / this.canvasScale);\n  }\n  /**\r\n   * 将像素坐标转换成画布坐标\r\n   * @param coordinate 像素坐标\r\n   */\n\n\n  pixelToCanvasCoordinate(coordinate) {\n    return coordinate.clone().scale(this.canvasScale);\n  }\n  /**\r\n   * 将视口坐标转换成像素坐标\r\n   * @param coordinate \r\n   */\n\n\n  viewportToPixelCoordinate(coordinate) {\n    return this.canvasToPixelCoordinate(this.viewportToCanvasCoordinate(coordinate));\n  }\n  /**\r\n   * 将像素坐标转换成视口坐标\r\n   * @param coordinate \r\n   */\n\n\n  pixelToViewportCoordinate(coordinate) {\n    return this.canvasToViewportCoordinate(this.pixelToCanvasCoordinate(coordinate));\n  }\n\n  get canvasVisibleRect() {\n    return [new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["Vector2d"](0, 0), // 左上\n    new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["Vector2d"](this.canvasWidth, 0), // 右上\n    new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["Vector2d"](this.canvasWidth, this.canvasHeight), // 右下\n    new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["Vector2d"](0, this.canvasHeight) // 左下\n    ];\n  }\n  /**\r\n   * 画布放大\r\n   * @param focus 缩放焦点相对于视口的坐标\r\n   */\n\n\n  zoomIn(focus) {\n    focus = focus ? this.viewportToCanvasCoordinate(focus) : new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["Vector2d"](this.viewWidth / 2, this.viewHeight / 2);\n    const coordinate = this.canvasToPixelCoordinate(focus);\n    this.canvasScale += 0.15;\n    this.canvasScale = this.canvasScale > this.maxScale ? this.maxScale : this.canvasScale;\n    const offset = this.canvasToPixelCoordinate(focus).substract(coordinate);\n    this.canvasWidth = this.viewWidth / this.canvasScale;\n    this.canvasHeight = this.viewHeight / this.canvasScale;\n    this.rootNode.children.forEach(child => {\n      child.translate(offset);\n    });\n    this.optimizeNode();\n    this.render();\n    this.repaint = true;\n    this.eventEmitter.emit(\'canvas:zoom\');\n  }\n  /**\r\n   * 画布缩小\r\n   * @param focus 缩放焦点相对于视口的坐标\r\n   */\n\n\n  zoomOut(focus) {\n    // 默认:画布中心\n    focus = focus ? this.viewportToCanvasCoordinate(focus) : new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["Vector2d"](this.viewWidth / 2, this.viewHeight / 2);\n    const coordinate = this.canvasToPixelCoordinate(focus);\n    this.canvasScale -= 0.15;\n    this.canvasScale = this.canvasScale < this.minScale ? this.minScale : this.canvasScale;\n    const offset = this.canvasToPixelCoordinate(focus).substract(coordinate);\n    this.canvasWidth = this.viewWidth / this.canvasScale;\n    this.canvasHeight = this.viewHeight / this.canvasScale;\n    this.rootNode.children.forEach(child => {\n      child.translate(offset);\n    });\n    this.optimizeNode();\n    this.render();\n    this.repaint = true;\n    this.eventEmitter.emit(\'canvas:zoom\');\n  }\n  /**\r\n   * 设置模式\r\n   * @param mode \r\n   */\n\n\n  setMode(mode) {\n    if (!_mode_modes__WEBPACK_IMPORTED_MODULE_9__["default"].hasMode(mode)) {\n      console.log(`该模式不存在:${mode}`);\n      return;\n    }\n\n    let interactions = _mode_modes__WEBPACK_IMPORTED_MODULE_9__["default"].use(this.interactionMode);\n\n    if (interactions) {\n      interactions.forEach(action => {\n        action.onUninstall(this);\n      });\n    }\n\n    this.interactionMode = mode;\n    interactions = _mode_modes__WEBPACK_IMPORTED_MODULE_9__["default"].use(this.interactionMode);\n\n    if (interactions) {\n      interactions.forEach(action => {\n        action.onInstall(this);\n      });\n    }\n  }\n  /**\r\n   * 点击事件\r\n   */\n\n\n  /**\r\n   * 优化节点显示\r\n   */\n  optimizeNode() {\n    if (!this.optimize) return; // 优化：缓存画布可视矩形\n\n    const canvasRect = this.canvasVisibleRect;\n    const nodes = this.rootNode.getDescendantBF();\n    nodes.forEach(node => {\n      node.visible = node.isInRect(canvasRect);\n    });\n  }\n\n  render() {\n    Object.assign(this.domCanvas.style, {\n      width: `${this.canvasWidth}px`,\n      height: `${this.canvasHeight}px`,\n      left: `${(this.viewWidth - this.canvasWidth) / 2}px`,\n      top: `${(this.viewHeight - this.canvasHeight) / 2}px`,\n      transform: `scale(${this.canvasScale})`\n    });\n    this.graphCanvas.width = this.topCanvas.width = this.viewWidth;\n    this.graphCanvas.height = this.topCanvas.height = this.viewHeight;\n  }\n\n  mount() {\n    if (this.mounted) return;\n    this.wrapper.appendChild(this.graphCanvas);\n    this.wrapper.appendChild(this.domCanvas);\n    this.container.appendChild(this.wrapper);\n    this.eventEmitter.emit(\'canvas:mounted\');\n    this.mounted = true;\n  }\n\n  topCanvasMount() {\n    if (this.topCanvasMounted) return;\n    this.wrapper.appendChild(this.topCanvas);\n    this.topCanvasMounted = true;\n  }\n\n  topCanvasUnmount() {\n    if (!this.topCanvasMounted) return;\n    this.wrapper.removeChild(this.topCanvas);\n    this.topCanvasMounted = false;\n  }\n\n  unmount() {\n    if (!this.mounted) return;\n    this.container.removeChild(this.wrapper);\n    this.mounted = false;\n  }\n\n  start() {\n    if (this._running) return;\n    this._running = true;\n    this.loop();\n  }\n\n  stop() {\n    if (!this._running) return;\n    cancelAnimationFrame(this._animationFrameId);\n    this._running = false;\n  }\n\n  loop() {\n    if (!this._running) return;\n    this._animationFrameId = requestAnimationFrame(() => {\n      // 判断是否需要重绘\n      if (this.repaint) {\n        this.graphCanvasCtx.clearRect(0, 0, this.viewWidth, this.viewHeight);\n        this.graphCanvasCtx.save();\n        this.graphCanvasCtx.scale(this.canvasScale, this.canvasScale);\n        this.renderNodes();\n        this.graphCanvasCtx.restore(); // 交互onUpdate钩子\n\n        const interactions = _mode_modes__WEBPACK_IMPORTED_MODULE_9__["default"].use(this.interactionMode);\n\n        if (interactions) {\n          interactions.forEach(action => {\n            action.onUpdate(this);\n          });\n        }\n\n        this.repaint = false;\n      }\n\n      this.loop();\n    });\n  }\n  /**\r\n   * 渲染节点\r\n   */\n\n\n  renderNodes() {\n    this.rootNode.getDescendantBF(node => {\n      // 节点连线渲染\n      node.edges.forEach(edge => {\n        if (edge.renderSign === this._animationFrameId) return;\n\n        if (edge.sourceNode === node) {\n          if (edge.targetNode.depth <= node.depth) {\n            edge.render();\n            edge.renderSign = this._animationFrameId;\n          }\n        } else {\n          if (edge.sourceNode.depth <= node.depth) {\n            edge.render();\n            edge.renderSign = this._animationFrameId;\n          }\n        }\n      });\n\n      if (node instanceof _graph_CanvasNode__WEBPACK_IMPORTED_MODULE_4__["CanvasNode"]) {\n        if (node.visible) {\n          // node.render()\n          node.update();\n        }\n      }\n\n      if (node instanceof _graph_DomNode__WEBPACK_IMPORTED_MODULE_5__["DomNode"]) {\n        if (node.visible) {\n          node.mount();\n\n          if (node.isUpdate) {\n            // node.render(this)\n            node.update();\n            node.isUpdate = false;\n          }\n        } else {\n          node.unmount();\n        }\n      }\n    });\n    this.virtualNode.edges.forEach(edge => {\n      edge.render();\n    });\n  }\n\n}\n\n_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Canvas, "config", _config_config__WEBPACK_IMPORTED_MODULE_11__["default"]);\n\n/* harmony default export */ __webpack_exports__["default"] = (Canvas);\n\n//# sourceURL=webpack:///./src/graphics/core/Canvas.ts?')},"./src/graphics/core/canvas.less":
/*!***************************************!*\
  !*** ./src/graphics/core/canvas.less ***!
  \***************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\nvar content = __webpack_require__(/*! !../../../node_modules/css-loader/dist/cjs.js??ref--8-1!../../../node_modules/postcss-loader/src!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./canvas.less */ "./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/src/index.js!./node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js!./src/graphics/core/canvas.less");\n\nif(typeof content === \'string\') content = [[module.i, content, \'\']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {"hmr":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../node_modules/style-loader/lib/addStyles.js */ "./node_modules/style-loader/lib/addStyles.js")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n//# sourceURL=webpack:///./src/graphics/core/canvas.less?')},"./src/graphics/edge/L.ts":
/*!********************************!*\
  !*** ./src/graphics/edge/L.ts ***!
  \********************************/
/*! exports provided: L, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "L", function() { return L; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n/* harmony import */ var _graph_Edge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../graph/Edge */ "./src/graphics/graph/Edge.ts");\n/* harmony import */ var _utils_math2d__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/math2d */ "./src/graphics/utils/math2d.ts");\n\n\n\n\nlet sourceJoinPointCopy = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"]();\nlet targetNodeCenterCopy = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"]();\nlet pixelCoordinateCopy = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"]();\n/**\r\n * L型线段\r\n */\n\nclass L extends _graph_Edge__WEBPACK_IMPORTED_MODULE_2__["Edge"] {\n  constructor(options) {\n    super(options);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "dash", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "text", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "arrow", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "arrowStart", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "rotate", 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "middlePoints", []);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "centerPoint", null);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "sourceJoinPoint", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "targetJoinPoint", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "isInRect", () => {\n      return true;\n    });\n\n    this.dash = options.dash || false;\n    this.text = options.text || \'\';\n    this.arrow = options.arrow || false;\n  }\n\n  isPointIn() {\n    const sourceNode = this.getSourceNode();\n    const targetNode = this.getTargetNode();\n    if (!sourceNode.visible && !targetNode.visible) return false;\n    const {\n      canvas\n    } = this;\n    if (!canvas) return false;\n    if (!canvas.nativeEvent) return false;\n    if (!this.sourceJoinPoint || !this.targetJoinPoint) return false;\n    const event = canvas.nativeEvent;\n    const viewCoordinate = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](event.clientX, event.clientY);\n    const pixelCoordinate = canvas.viewportToPixelCoordinate(viewCoordinate);\n    pixelCoordinateCopy.copy(pixelCoordinate); // 判断点是否在线上\n\n    if (_utils_math2d__WEBPACK_IMPORTED_MODULE_3__["Math2d"].isPointInPolyline(pixelCoordinate, [this.sourceJoinPoint, ...this.middlePoints, this.targetJoinPoint], 0.1)) return true; // 判断点是否在箭头上\n\n    if (this.arrow && this.arrowStart) {\n      const p0 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](0, 0).rotate(this.rotate);\n      const p1 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](-10, +4).rotate(this.rotate);\n      const p2 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](-10, -4).rotate(this.rotate);\n      if (_utils_math2d__WEBPACK_IMPORTED_MODULE_3__["Math2d"].isPointInTriangle(pixelCoordinateCopy.substract(this.arrowStart), p0, p1, p2)) return true;\n    } // 判断是否在文字上\n\n\n    if (this.text && this.centerPoint) {\n      const {\n        graphCanvasCtx\n      } = canvas;\n      graphCanvasCtx.font = \'14px sans-serif\';\n      const textRectWidth = graphCanvasCtx.measureText(this.text).width;\n      const textLeft = this.centerPoint.x - textRectWidth / 2;\n      const textTop = this.centerPoint.y - 7;\n      const textRect = [new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](textLeft, textTop), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](textLeft + textRectWidth, textTop), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](textLeft + textRectWidth, textTop + 14), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](textLeft, textTop + 14)];\n      if (_utils_math2d__WEBPACK_IMPORTED_MODULE_3__["Math2d"].isPointInPolygon(pixelCoordinate, textRect)) return true;\n    }\n\n    return false;\n  }\n\n  render() {\n    if (!this.canvas) return;\n    const {\n      graphCanvasCtx\n    } = this.canvas; // const { sourceNode, targetNode } = this\n\n    const sourceNode = this.getSourceNode();\n    const targetNode = this.getTargetNode(); // 两端节点都存在且至少有一个是可见的\n\n    if (sourceNode.visible || targetNode.visible) {\n      const sourceJoinPoints = sourceNode.boundingJoinPoints;\n      const targetJoinPoints = targetNode.boundingJoinPoints; // 计算出两个节点间距离最近的连接点\n\n      let minDistance = 0;\n      this.sourceJoinPoint = undefined;\n      this.targetJoinPoint = undefined;\n      sourceJoinPoints.forEach(point1 => {\n        targetJoinPoints.forEach(point2 => {\n          const distance = point1.distance(point2);\n\n          if (minDistance > distance || !this.sourceJoinPoint || !this.targetJoinPoint) {\n            minDistance = distance;\n            this.sourceJoinPoint = point1;\n            this.targetJoinPoint = point2;\n          }\n        });\n      });\n      if (!this.sourceJoinPoint || !this.targetJoinPoint) return;\n      const sourceJoinPoint = this.sourceJoinPoint;\n      const targetJoinPoint = this.targetJoinPoint;\n      sourceJoinPointCopy.copy(sourceJoinPoint);\n      const outDirection = sourceJoinPointCopy.substract(sourceNode.centerPoint).normalize();\n      targetNodeCenterCopy.copy(targetNode.centerPoint);\n      const inDirection = targetNodeCenterCopy.substract(targetJoinPoint).normalize();\n\n      if (outDirection.x === 1 || outDirection.x === -1) {\n        if (inDirection.x === 1 || inDirection.x === -1) {\n          const middleX = (sourceJoinPoint.x + targetJoinPoint.x) / 2;\n          this.middlePoints = [new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](middleX, sourceJoinPoint.y), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](middleX, targetJoinPoint.y)];\n        } else {\n          this.middlePoints = [new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](targetJoinPoint.x, sourceJoinPoint.y)];\n        }\n      } else {\n        if (inDirection.x === 1 || inDirection.x === -1) {\n          this.middlePoints = [new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](sourceJoinPoint.x, targetJoinPoint.y)];\n        } else {\n          const middleY = (sourceJoinPoint.y + targetJoinPoint.y) / 2;\n          this.middlePoints = [new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](sourceJoinPoint.x, middleY), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](targetJoinPoint.x, middleY)];\n        }\n      }\n\n      graphCanvasCtx.save();\n\n      if (\n      /* 虚线 */\n      this.dash) {\n        graphCanvasCtx.setLineDash([4, 4]);\n      }\n\n      graphCanvasCtx.beginPath();\n      graphCanvasCtx.moveTo(sourceJoinPoint.x, sourceJoinPoint.y);\n      this.middlePoints.forEach(point => {\n        graphCanvasCtx.lineTo(point.x, point.y);\n      });\n      graphCanvasCtx.lineTo(targetJoinPoint.x, targetJoinPoint.y);\n      graphCanvasCtx.strokeStyle = this.active ? \'#e96160\' : \'#29c1f8\';\n      graphCanvasCtx.stroke();\n\n      if (\n      /* 文本 */\n      this.text) {\n        this.centerPoint = _utils_math2d__WEBPACK_IMPORTED_MODULE_3__["Math2d"].getLinePoint([sourceJoinPoint, ...this.middlePoints, targetJoinPoint], 0.5);\n\n        if (this.centerPoint) {\n          graphCanvasCtx.beginPath();\n          graphCanvasCtx.font = \'14px sans-serif\'; // graphCanvasCtx.textAlign = \'center\'\n\n          graphCanvasCtx.textBaseline = \'top\';\n          const textRectWidth = graphCanvasCtx.measureText(this.text).width;\n          const textLeft = this.centerPoint.x - textRectWidth / 2;\n          const textTop = this.centerPoint.y - 7;\n          graphCanvasCtx.rect(textLeft, textTop, textRectWidth, 14);\n          graphCanvasCtx.fillStyle = \'#fff\';\n          graphCanvasCtx.fill();\n          graphCanvasCtx.fillStyle = this.active ? \'#e96160\' : \'#29c1f8\';\n          graphCanvasCtx.fillText(this.text, textLeft, textTop);\n        }\n      }\n\n      if (\n      /**箭头 */\n      this.arrow) {\n        this.arrowStart = targetJoinPoint;\n        this.rotate = inDirection.xAxisAngle();\n        graphCanvasCtx.beginPath();\n        graphCanvasCtx.save();\n        graphCanvasCtx.translate(this.arrowStart.x, this.arrowStart.y);\n        graphCanvasCtx.rotate(this.rotate);\n        graphCanvasCtx.moveTo(0, 0);\n        graphCanvasCtx.lineTo(-10, +4);\n        graphCanvasCtx.lineTo(-10, -4);\n        graphCanvasCtx.closePath();\n        graphCanvasCtx.fillStyle = this.active ? \'#e96160\' : \'#29c1f8\';\n        graphCanvasCtx.fill();\n        graphCanvasCtx.restore();\n      }\n\n      graphCanvasCtx.restore();\n    }\n  }\n\n}\n/* harmony default export */ __webpack_exports__["default"] = (L);\n\n//# sourceURL=webpack:///./src/graphics/edge/L.ts?')},"./src/graphics/edge/Line.ts":
/*!***********************************!*\
  !*** ./src/graphics/edge/Line.ts ***!
  \***********************************/
/*! exports provided: Line, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Line", function() { return Line; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n/* harmony import */ var _graph_Edge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../graph/Edge */ "./src/graphics/graph/Edge.ts");\n/* harmony import */ var _utils_math2d__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/math2d */ "./src/graphics/utils/math2d.ts");\n\n\n\n\nclass Line extends _graph_Edge__WEBPACK_IMPORTED_MODULE_2__["Edge"] {\n  constructor(options) {\n    super(options);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "dash", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "text", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "arrow", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "rotate", 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "begin", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "end", void 0);\n\n    this.dash = options.dash || false;\n    this.text = options.text || \'\';\n    this.arrow = options.arrow || false;\n  }\n\n  isInRect() {\n    return true;\n  }\n\n  isPointIn() {\n    const targetNode = this.getTargetNode();\n    const sourceNode = this.getSourceNode();\n    if (!targetNode.visible && !sourceNode.visible) return false;\n    const {\n      canvas\n    } = this;\n    if (!canvas) return false;\n    if (!canvas.nativeEvent) return false;\n    if (!this.begin || !this.end) return false;\n    const event = canvas.nativeEvent;\n    const viewCoordinate = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](event.clientX, event.clientY);\n    const pixelCoordinate = canvas.viewportToPixelCoordinate(viewCoordinate); // 判断点是否在线上\n\n    if (_utils_math2d__WEBPACK_IMPORTED_MODULE_3__["Math2d"].isPointInLineSegment(pixelCoordinate, [this.begin, this.end], 0.1)) return true; // 判断点是否在箭头上\n\n    if (this.arrow) {\n      const p0 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](0, 0).rotate(this.rotate);\n      const p1 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](-10, +4).rotate(this.rotate);\n      const p2 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](-10, -4).rotate(this.rotate);\n      if (_utils_math2d__WEBPACK_IMPORTED_MODULE_3__["Math2d"].isPointInTriangle(_utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(pixelCoordinate).substract(this.end), p0, p1, p2)) return true;\n    } // 判断是否在文字上\n\n\n    if (this.text) {\n      const {\n        graphCanvasCtx\n      } = canvas;\n      graphCanvasCtx.save();\n      graphCanvasCtx.font = \'14px sans-serif\';\n      const textRectWidth = graphCanvasCtx.measureText(this.text).width;\n      const sourceToTarget = _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(this.end).substract(this.begin);\n      const lineNormal = sourceToTarget.normalize();\n      const lineCenter = _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(this.begin).add(_utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(sourceToTarget).scale(1 / 2));\n      const perpendicular = sourceToTarget.perpendicular().normalize();\n      graphCanvasCtx.restore();\n\n      if (this.rotate < Math.PI / 2 && this.rotate >= -Math.PI / 2) {\n        const p0 = _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(lineCenter).substract(_utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(lineNormal).scale(textRectWidth / 2)).add(_utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(perpendicular).scale(17));\n        const p1 = _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(p0).add(_utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(lineNormal).scale(textRectWidth));\n        const p2 = _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(p1).substract(_utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(perpendicular).scale(14));\n        const p3 = _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(p2).substract(_utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(lineNormal).scale(textRectWidth));\n        if (_utils_math2d__WEBPACK_IMPORTED_MODULE_3__["Math2d"].isPointInPolygon(pixelCoordinate, [p0, p1, p2, p3])) return true;\n      } else {\n        const p0 = _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(lineCenter).substract(_utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(lineNormal).scale(textRectWidth / 2)).add(_utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(perpendicular).scale(-17));\n        const p1 = _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(p0).add(_utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(lineNormal).scale(textRectWidth));\n        const p2 = _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(p1).substract(_utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(perpendicular).scale(-14));\n        const p3 = _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(p2).substract(_utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(lineNormal).scale(textRectWidth));\n        if (_utils_math2d__WEBPACK_IMPORTED_MODULE_3__["Math2d"].isPointInPolygon(pixelCoordinate, [p0, p1, p2, p3])) return true;\n      }\n    }\n\n    return false;\n  }\n\n  render() {\n    if (!this.canvas) return;\n    const {\n      graphCanvasCtx\n    } = this.canvas;\n    const targetNode = this.getTargetNode();\n    const sourceNode = this.getSourceNode();\n\n    if (sourceNode.visible || targetNode.visible) {\n      const sourceCenter = sourceNode.centerPoint;\n      const targetCenter = targetNode.centerPoint;\n      const beginToEnd = [sourceCenter, targetCenter];\n      this.begin = sourceNode.shapeType === \'rect\' ? intersectWithRect(beginToEnd, sourceNode.boundingRect) : intersectWithCircle(sourceCenter, sourceNode.radius, targetCenter);\n      if (!this.begin) return;\n      this.end = targetNode.shapeType === \'rect\' ? intersectWithRect(beginToEnd, targetNode.boundingRect) : intersectWithCircle(targetCenter, targetNode.radius, sourceCenter);\n      if (!this.end) return;\n      const sourceToTarget = _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(targetCenter).substract(sourceCenter);\n      graphCanvasCtx.save();\n      graphCanvasCtx.beginPath(); // 画线\n\n      graphCanvasCtx.moveTo(this.begin.x, this.begin.y);\n      graphCanvasCtx.lineTo(this.end.x, this.end.y);\n      graphCanvasCtx.strokeStyle = this.active ? \'#e96160\' : \'#29c1f8\';\n      graphCanvasCtx.fillStyle = this.active ? \'#e96160\' : \'#29c1f8\';\n\n      if (\n      /* 虚线 */\n      this.dash) {\n        graphCanvasCtx.setLineDash([4, 4]);\n      }\n\n      graphCanvasCtx.stroke();\n      this.rotate = sourceToTarget.xAxisAngle();\n\n      if (\n      /* 文本 */\n      this.text) {\n        graphCanvasCtx.save();\n        const lineCenter = _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(sourceCenter).add(_utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(sourceToTarget).scale(1 / 2));\n        graphCanvasCtx.font = \'14px sans-serif\';\n        graphCanvasCtx.textAlign = \'center\';\n        graphCanvasCtx.textBaseline = \'middle\';\n        graphCanvasCtx.translate(lineCenter.x, lineCenter.y);\n\n        if (this.rotate < Math.PI / 2 && this.rotate >= -Math.PI / 2) {\n          graphCanvasCtx.rotate(this.rotate);\n        } else {\n          graphCanvasCtx.rotate(this.rotate - Math.PI);\n        }\n\n        graphCanvasCtx.fillText(this.text, 0, -10);\n        graphCanvasCtx.restore();\n      }\n\n      if (\n      /**箭头 */\n      this.arrow) {\n        graphCanvasCtx.beginPath();\n        graphCanvasCtx.save();\n        graphCanvasCtx.translate(this.end.x, this.end.y);\n        graphCanvasCtx.rotate(this.rotate);\n        graphCanvasCtx.moveTo(0, 0);\n        graphCanvasCtx.lineTo(-10, +4);\n        graphCanvasCtx.lineTo(-10, -4);\n        graphCanvasCtx.closePath();\n        graphCanvasCtx.fill();\n        graphCanvasCtx.restore();\n      }\n\n      graphCanvasCtx.restore();\n    }\n  }\n\n}\n/**\r\n * 获取线段与矩形的交点\r\n * @param line \r\n * @param rect \r\n */\n\nfunction intersectWithRect(line, rect) {\n  const length = rect.length;\n\n  for (let i = 0; i < length; i++) {\n    const A = rect[i];\n    const B = i === length - 1 ? rect[0] : rect[i + 1];\n\n    if (_utils_math2d__WEBPACK_IMPORTED_MODULE_3__["Math2d"].isIntersect(line, [A, B])) {\n      return _utils_math2d__WEBPACK_IMPORTED_MODULE_3__["Math2d"].getLineIntersect([A, B], line);\n    }\n  }\n\n  return undefined;\n}\n/**\r\n * 获取从圆心出发的线段与该圆的交点\r\n * @param o 圆心坐标 \r\n * @param radius 半径\r\n * @param point 线段的另一端点\r\n */\n\n\nfunction intersectWithCircle(o, radius, point) {\n  const line = _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"].copy(point).substract(o);\n  if (line.magnitude < radius) return undefined;\n  const angle = line.xAxisAngle();\n  return o.add(new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["Vector2d"](radius * Math.cos(angle), radius * Math.sin(angle)));\n}\n\n/* harmony default export */ __webpack_exports__["default"] = (Line);\n\n//# sourceURL=webpack:///./src/graphics/edge/Line.ts?')},"./src/graphics/events/eventEmitter.ts":
/*!*********************************************!*\
  !*** ./src/graphics/events/eventEmitter.ts ***!
  \*********************************************/
/*! exports provided: EventEmitter, globalEvent, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventEmitter", function() { return EventEmitter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "globalEvent", function() { return globalEvent; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n\nclass EventEmitter {\n  constructor() {\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "events", {});\n  }\n\n  /**\r\n   * 监听事件\r\n   * @param eventName \r\n   * @param listener \r\n   */\n  on(eventName, listener) {\n    this.events[eventName] = this.events[eventName] || [];\n    this.events[eventName].push(listener);\n  }\n  /**\r\n   * 移除监听回调\r\n   * @param eventName \r\n   * @param listener \r\n   */\n\n\n  off(eventName, listener) {\n    if (!this.events[eventName]) return;\n    const index = this.events[eventName].findIndex(item => item === listener);\n    this.events[eventName].splice(index, 1);\n  }\n  /**\r\n   * 激发事件\r\n   * @param eventName \r\n   * @param params \r\n   */\n\n\n  emit(eventName, params) {\n    if (this.events[eventName]) {\n      this.events[eventName].forEach(listener => {\n        listener(params);\n      });\n    }\n  }\n\n}\nconst globalEvent = new EventEmitter();\n/* harmony default export */ __webpack_exports__["default"] = (EventEmitter);\n\n//# sourceURL=webpack:///./src/graphics/events/eventEmitter.ts?')},"./src/graphics/graph/CanvasNode.ts":
/*!******************************************!*\
  !*** ./src/graphics/graph/CanvasNode.ts ***!
  \******************************************/
/*! exports provided: CanvasNode, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CanvasNode", function() { return CanvasNode; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Node */ "./src/graphics/graph/Node.ts");\n\n\nclass CanvasNode extends _Node__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(options) {\n    super(options);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "renderType", "CANVAS");\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "cacheCanvas", document.createElement(\'canvas\'));\n  }\n\n  destroy() {\n    this.removeAllChild();\n    this.beforeDestroy();\n  }\n\n}\n/* harmony default export */ __webpack_exports__["default"] = (CanvasNode);\n\n//# sourceURL=webpack:///./src/graphics/graph/CanvasNode.ts?')},"./src/graphics/graph/DomNode.ts":
/*!***************************************!*\
  !*** ./src/graphics/graph/DomNode.ts ***!
  \***************************************/
/*! exports provided: DomNode, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DomNode", function() { return DomNode; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Node */ "./src/graphics/graph/Node.ts");\n\n\nclass DomNode extends _Node__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(options) {\n    super(options);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "renderType", \'DOM\');\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "mounted", false);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "$el", document.createElement(\'div\'));\n\n    Object.assign(this.$el.style, {\n      position: \'absolute\',\n      left: 0,\n      top: 0\n    });\n  }\n  /**\r\n   * 挂载到文档中\r\n   */\n\n\n  mount() {\n    if (this.mounted || !this.canvas) return;\n    this.mounted = true;\n    this.canvas.domCanvas.appendChild(this.$el);\n  }\n  /**\r\n   * 卸载\r\n   */\n\n\n  unmount() {\n    if (!this.mounted || !this.canvas) return;\n    this.mounted = false;\n    this.canvas.domCanvas.removeChild(this.$el);\n  }\n\n  isPointIn() {\n    const {\n      canvas\n    } = this;\n    if (!canvas) return false;\n    if (!canvas.nativeEvent) return false;\n    let el = canvas.nativeEvent.target;\n    let isHit = false;\n\n    while (el && !isHit) {\n      if (el === this.$el) {\n        isHit = true;\n      }\n\n      el = el.parentElement;\n    }\n\n    return isHit;\n  }\n\n  update() {\n    const {\n      x,\n      y\n    } = this.getPosition();\n    this.$el.style.transform = `translate3d(${x}px,${y}px,0)`;\n  }\n\n  destroy() {\n    this.removeAllChild();\n    this.beforeDestroy();\n    this.unmount();\n  }\n\n}\n/* harmony default export */ __webpack_exports__["default"] = (DomNode);\n\n//# sourceURL=webpack:///./src/graphics/graph/DomNode.ts?')},"./src/graphics/graph/Edge.ts":
/*!************************************!*\
  !*** ./src/graphics/graph/Edge.ts ***!
  \************************************/
/*! exports provided: Edge, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Edge", function() { return Edge; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Graph__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Graph */ "./src/graphics/graph/Graph.ts");\n\n\nclass Edge extends _Graph__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(options) {\n    super(options);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "renderType", \'CANVAS\');\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "targetNode", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "sourceNode", void 0);\n\n    this.targetNode = options.targetNode;\n    this.sourceNode = options.sourceNode;\n  }\n  /**\r\n   * 获取可见的目标节点\r\n   */\n\n\n  getTargetNode() {\n    let node = this.targetNode;\n\n    while (!node.visible && node.parent && node.parent.renderType !== \'NONE\') {\n      node = node.parent;\n    }\n\n    return node;\n  }\n  /**\r\n   * 获取可见的源节点\r\n   */\n\n\n  getSourceNode() {\n    let node = this.sourceNode;\n\n    while (!node.visible && node.parent && node.parent.renderType !== \'NONE\') {\n      node = node.parent;\n    }\n\n    return node;\n  }\n\n}\n/* harmony default export */ __webpack_exports__["default"] = (Edge);\n\n//# sourceURL=webpack:///./src/graphics/graph/Edge.ts?')},"./src/graphics/graph/Graph.ts":
/*!*************************************!*\
  !*** ./src/graphics/graph/Graph.ts ***!
  \*************************************/
/*! exports provided: Graph, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Graph", function() { return Graph; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n\nlet graphId = 1;\nclass Graph {\n  /**\r\n   * 可见性\r\n   */\n  get visible() {\n    return this._visible;\n  }\n\n  set visible(visible) {\n    this._visible = visible;\n  } // 渲染层级\n\n\n  constructor(options) {\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "canvas", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "active", false);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_visible", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "zIndex", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "isUpdate", true);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "graphId", graphId++);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "data", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "renderSign", void 0);\n\n    this._visible = options.visible || true;\n    this.zIndex = options.zIndex || 0;\n    this.data = options.data;\n  }\n  /**\r\n   * 判断点是否在图形内\r\n   * @param canvas \r\n   */\n\n\n  /**\r\n   * 是否在一个矩形内\r\n   * @param points \r\n   */\n  isInRect(points) {\n    return false;\n  }\n  /**\r\n   * 是否被指定矩形包围\r\n   * @param rect \r\n   */\n\n\n  isWrappedInRect(rect) {\n    return false;\n  }\n  /**\r\n   * 是否被指定圆包围\r\n   */\n\n\n  isWrappedInCircle() {\n    return false;\n  }\n  /**\r\n   * hook:渲染时调用\r\n   */\n\n\n  render() {}\n  /**\r\n   * hook:更新时调用\r\n   */\n\n\n  update() {}\n  /**\r\n   * hook:销毁时调用\r\n   */\n\n\n  destroy() {}\n  /**\r\n   * hook:销毁前调用\r\n   */\n\n\n  beforeDestroy() {}\n\n}\n/* harmony default export */ __webpack_exports__["default"] = (Graph);\n\n//# sourceURL=webpack:///./src/graphics/graph/Graph.ts?')},"./src/graphics/graph/Node.ts":
/*!************************************!*\
  !*** ./src/graphics/graph/Node.ts ***!
  \************************************/
/*! exports provided: Node, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Node", function() { return Node; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Graph__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Graph */ "./src/graphics/graph/Graph.ts");\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n\n\n\nclass Node extends _Graph__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  /**\r\n   * id\r\n   */\n\n  /**\r\n   * 位置\r\n   */\n\n  /**\r\n   * 获取位置\r\n   */\n  getPosition() {\n    return this.position;\n  }\n\n  get visible() {\n    if (!this._visible) return false;\n    if (this.parent && (!this.parent.visible || !this.parent.isExpanded)) return false;\n    return true;\n  }\n\n  set visible(visible) {\n    this._visible = visible;\n  }\n  /**\r\n   * 顶点坐标数组\r\n   */\n\n\n  constructor(options) {\n    super(options);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "id", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "position", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "renderType", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "shapeType", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "isGroup", false);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "isExpanded", true);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "canResize", false);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "children", []);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parent", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "edges", []);\n\n    this.position = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["Vector2d"](options.x, options.y);\n    this.id = options.id;\n  }\n  /**\r\n   * 将节点以及其子元素位置偏移\r\n   * @param offset \r\n   */\n\n\n  translate(offset) {\n    this.position.add(offset);\n    this.isUpdate = true;\n    this.children.forEach(child => {\n      child.translate(offset);\n    });\n  }\n  /**\r\n   * 添加边线\r\n   * @param edge \r\n   */\n\n\n  addEdge(edge) {\n    if (this.edges.find(item => item === edge)) return;\n    this.edges.push(edge);\n  }\n  /**\r\n   * 删除边线\r\n   * @param edge \r\n   */\n\n\n  removeEdge(edge) {\n    const index = this.edges.findIndex(item => item === edge);\n\n    if (index > -1) {\n      this.edges.splice(index, 1);\n    }\n  }\n  /**\r\n   * 添加子节点，按zIndex升序排序\r\n   * @param child \r\n   */\n\n\n  addChild(child) {\n    if (this.hasChild(child)) return undefined;\n    let index = this.children.length - 1;\n    let current = this.children[index];\n\n    while (current) {\n      if (current.zIndex <= child.zIndex) {\n        return this.addChildAt(child, index + 1);\n      }\n\n      index--;\n      current = this.children[index];\n    }\n\n    return this.addChildAt(child, 0);\n  }\n  /**\r\n   * 在指定位置追加子节点\r\n   * @param child \r\n   * @param index \r\n   */\n\n\n  addChildAt(child, index) {\n    if (index >= 0 && index <= this.children.length) {\n      if (child.parent) {\n        child.parent.removeChild(child, false);\n      }\n\n      child.parent = this;\n      this.children.splice(index, 0, child);\n\n      if (this.canvas) {\n        child.canvas = this.canvas; //\n\n        child.render();\n        child.getDescendantBF(node => {\n          node.canvas = this.canvas; //\n\n          node.render();\n        });\n      }\n\n      return child;\n    } else {\n      return undefined;\n    }\n  }\n  /**\r\n   * 删除并且销毁子节点\r\n   * @param child \r\n   * @param destroy 是否销毁\r\n   */\n\n\n  removeChild(child, destroy = true) {\n    const index = this.children.findIndex(node => node === child);\n    if (index === -1) return false;\n    destroy && child.destroy();\n    child.canvas = undefined;\n    this.children.splice(index, 1);\n    return true;\n  }\n  /**\r\n   * 删除所有子节点\r\n   * @param destroy 是否销毁\r\n   */\n\n\n  removeAllChild(destroy = true) {\n    const children = [...this.children];\n    children.forEach(child => {\n      this.removeChild(child, destroy);\n    });\n  }\n  /**\r\n   * 判断是否为子节点\r\n   * @param child \r\n   */\n\n\n  hasChild(child) {\n    return !!this.children.find(item => item === child);\n  }\n  /**\r\n   * 判断是否为子孙节点\r\n   * @param descendant \r\n   */\n\n\n  hasDescendant(descendant) {\n    let result = false;\n    this.getDescendantBF(node => {\n      if (node === descendant) {\n        return result = true;\n      }\n    });\n    return result;\n  }\n  /**\r\n   * 根据id获取子节点\r\n   * @param id \r\n   */\n\n\n  getChildById(id) {\n    return this.children.find(child => child.id === id);\n  }\n  /**\r\n   * 获取激活状态的子节点列表\r\n   */\n\n\n  getActiveChild() {\n    return this.children.filter(child => child.active);\n  }\n  /**\r\n   * 获取激活状态的子孙节点列表\r\n   */\n\n\n  getActiveDescendant() {\n    const nodes = [];\n    this.getDescendantBF(node => {\n      if (node.active) {\n        nodes.push(node);\n      }\n    });\n    return nodes;\n  }\n  /**\r\n   * 遍历子孙节点，深度优先\r\n   * 遍历顺序：1.深度优先\r\n   *          2.从右到左\r\n   *          3.从下到上\r\n   * 场景：鼠标点击判定顺序\r\n   * @param handler \r\n   */\n\n\n  getDescendantDF(handler) {\n    let breakFlag = false;\n    const descendants = [];\n\n    function getDescendantDF(handler) {\n      for (let i = this.children.length - 1; i >= 0; i--) {\n        const current = this.children[i];\n        getDescendantDF.call(current, handler);\n        if (breakFlag) return descendants;\n        descendants.push(current);\n\n        if (handler && handler(current)) {\n          breakFlag = true;\n          return descendants;\n        }\n      }\n\n      return descendants;\n    }\n\n    return getDescendantDF.call(this, handler);\n  }\n  /**\r\n   * 遍历子孙节点，广度优先\r\n   * 遍历顺序：1.广度优先\r\n   *          2.从左到右\r\n   *          3.从上到下\r\n   * 场景：节点渲染顺序\r\n   * @param handler \r\n   */\n\n\n  getDescendantBF(handler) {\n    const descendants = [];\n    const queue = [...this.children];\n\n    while (queue.length) {\n      const first = queue.shift();\n      descendants.push(first);\n      queue.push(...first.children);\n\n      if (handler && handler(first)) {\n        break;\n      }\n    }\n\n    return descendants;\n  }\n  /**\r\n   * 获取根节点\r\n   */\n\n\n  get root() {\n    let cur = this;\n\n    while (cur.parent !== undefined) {\n      cur = cur.parent;\n    }\n\n    return cur;\n  }\n  /**\r\n   * 获取节点深度\r\n   */\n\n\n  get depth() {\n    let depth = 0;\n    let cur = this;\n\n    while (cur.parent !== undefined) {\n      cur = cur.parent;\n      depth++;\n    }\n\n    return depth;\n  }\n  /**\r\n   * 获取第一个子节点\r\n   */\n\n\n  get firstChild() {\n    return this.children[0];\n  }\n  /**\r\n   * 获取最后一个子节点\r\n   */\n\n\n  get lastChild() {\n    return this.children[this.children.length - 1];\n  }\n\n}\n/* harmony default export */ __webpack_exports__["default"] = (Node);\n\n//# sourceURL=webpack:///./src/graphics/graph/Node.ts?')},"./src/graphics/graph/VirtualNode.ts":
/*!*******************************************!*\
  !*** ./src/graphics/graph/VirtualNode.ts ***!
  \*******************************************/
/*! exports provided: VirtualNode, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VirtualNode", function() { return VirtualNode; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Node */ "./src/graphics/graph/Node.ts");\n\n\nclass VirtualNode extends _Node__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(options) {\n    super(options);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "renderType", \'NONE\');\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "shapeType", \'circle\');\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "radius", 0);\n  }\n\n  get vertexes() {\n    return [this.position, this.position, this.position, this.position];\n  }\n\n  get boundingRect() {\n    return [this.position, this.position, this.position, this.position];\n  }\n\n  get boundingJoinPoints() {\n    return [this.position];\n  }\n\n  get joinPoint() {\n    return this.position;\n  }\n\n  get centerPoint() {\n    return this.position;\n  }\n\n  get depth() {\n    return Number.MAX_SAFE_INTEGER;\n  }\n\n  isInRect() {\n    return false;\n  }\n\n  isPointIn() {\n    return false;\n  }\n\n  render() {}\n\n  destroy() {}\n\n  updatePosition() {}\n\n  updateRender() {}\n\n}\n/* harmony default export */ __webpack_exports__["default"] = (VirtualNode);\n\n//# sourceURL=webpack:///./src/graphics/graph/VirtualNode.ts?')},"./src/graphics/index.ts":
/*!*******************************!*\
  !*** ./src/graphics/index.ts ***!
  \*******************************/
/*! exports provided: Canvas, ContextMenu, EventEmitter, globalEvent, CanvasNode, DomNode, Edge, Node, MODE_DEFAULT, MODE_VIEW, MODE_CREATE_EDGE, MODE_CREATE_L, MODE_AREA_PICK, MODE_BORDER, modes, selectInteraction, createEdgeInteraction, createLInteraction, dragInteraction, dropInteraction, menuInteration, moveCanvasInteraction, wheelZoomInteraction, Interaction, areaPickInteraction, RectDomNode, RectCanvasNode, CircleCanvasNode, RectGroup, CircleGroup, Line, L, Math2d, Vector2d, throttle, imgLoad, applyMixins, TreeNode */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_Canvas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core/Canvas */ "./src/graphics/core/Canvas.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Canvas", function() { return _core_Canvas__WEBPACK_IMPORTED_MODULE_0__["Canvas"]; });\n\n/* harmony import */ var _contextMenu_ContextMenu__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./contextMenu/ContextMenu */ "./src/graphics/contextMenu/ContextMenu.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ContextMenu", function() { return _contextMenu_ContextMenu__WEBPACK_IMPORTED_MODULE_1__["ContextMenu"]; });\n\n/* harmony import */ var _events_eventEmitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./events/eventEmitter */ "./src/graphics/events/eventEmitter.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EventEmitter", function() { return _events_eventEmitter__WEBPACK_IMPORTED_MODULE_2__["EventEmitter"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "globalEvent", function() { return _events_eventEmitter__WEBPACK_IMPORTED_MODULE_2__["globalEvent"]; });\n\n/* harmony import */ var _graph_CanvasNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./graph/CanvasNode */ "./src/graphics/graph/CanvasNode.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CanvasNode", function() { return _graph_CanvasNode__WEBPACK_IMPORTED_MODULE_3__["CanvasNode"]; });\n\n/* harmony import */ var _graph_DomNode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./graph/DomNode */ "./src/graphics/graph/DomNode.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DomNode", function() { return _graph_DomNode__WEBPACK_IMPORTED_MODULE_4__["DomNode"]; });\n\n/* harmony import */ var _graph_Edge__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./graph/Edge */ "./src/graphics/graph/Edge.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Edge", function() { return _graph_Edge__WEBPACK_IMPORTED_MODULE_5__["Edge"]; });\n\n/* harmony import */ var _graph_Node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./graph/Node */ "./src/graphics/graph/Node.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Node", function() { return _graph_Node__WEBPACK_IMPORTED_MODULE_6__["Node"]; });\n\n/* harmony import */ var _mode_modes__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./mode/modes */ "./src/graphics/mode/modes.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MODE_DEFAULT", function() { return _mode_modes__WEBPACK_IMPORTED_MODULE_7__["MODE_DEFAULT"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MODE_VIEW", function() { return _mode_modes__WEBPACK_IMPORTED_MODULE_7__["MODE_VIEW"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MODE_CREATE_EDGE", function() { return _mode_modes__WEBPACK_IMPORTED_MODULE_7__["MODE_CREATE_EDGE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MODE_CREATE_L", function() { return _mode_modes__WEBPACK_IMPORTED_MODULE_7__["MODE_CREATE_L"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MODE_AREA_PICK", function() { return _mode_modes__WEBPACK_IMPORTED_MODULE_7__["MODE_AREA_PICK"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MODE_BORDER", function() { return _mode_modes__WEBPACK_IMPORTED_MODULE_7__["MODE_BORDER"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "modes", function() { return _mode_modes__WEBPACK_IMPORTED_MODULE_7__["modes"]; });\n\n/* harmony import */ var _interaction_selectInteraction__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./interaction/selectInteraction */ "./src/graphics/interaction/selectInteraction.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "selectInteraction", function() { return _interaction_selectInteraction__WEBPACK_IMPORTED_MODULE_8__["selectInteraction"]; });\n\n/* harmony import */ var _interaction_createEdgeInteraction__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./interaction/createEdgeInteraction */ "./src/graphics/interaction/createEdgeInteraction.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createEdgeInteraction", function() { return _interaction_createEdgeInteraction__WEBPACK_IMPORTED_MODULE_9__["createEdgeInteraction"]; });\n\n/* harmony import */ var _interaction_createLInteraction__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./interaction/createLInteraction */ "./src/graphics/interaction/createLInteraction.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createLInteraction", function() { return _interaction_createLInteraction__WEBPACK_IMPORTED_MODULE_10__["createLInteraction"]; });\n\n/* harmony import */ var _interaction_dragInteraction__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./interaction/dragInteraction */ "./src/graphics/interaction/dragInteraction.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "dragInteraction", function() { return _interaction_dragInteraction__WEBPACK_IMPORTED_MODULE_11__["dragInteraction"]; });\n\n/* harmony import */ var _interaction_dropInteraction__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./interaction/dropInteraction */ "./src/graphics/interaction/dropInteraction.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "dropInteraction", function() { return _interaction_dropInteraction__WEBPACK_IMPORTED_MODULE_12__["dropInteraction"]; });\n\n/* harmony import */ var _interaction_menuInteraction__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./interaction/menuInteraction */ "./src/graphics/interaction/menuInteraction.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "menuInteration", function() { return _interaction_menuInteraction__WEBPACK_IMPORTED_MODULE_13__["menuInteration"]; });\n\n/* harmony import */ var _interaction_moveCanvasInteraction__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./interaction/moveCanvasInteraction */ "./src/graphics/interaction/moveCanvasInteraction.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "moveCanvasInteraction", function() { return _interaction_moveCanvasInteraction__WEBPACK_IMPORTED_MODULE_14__["moveCanvasInteraction"]; });\n\n/* harmony import */ var _interaction_wheelZoomInteraction__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./interaction/wheelZoomInteraction */ "./src/graphics/interaction/wheelZoomInteraction.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "wheelZoomInteraction", function() { return _interaction_wheelZoomInteraction__WEBPACK_IMPORTED_MODULE_15__["wheelZoomInteraction"]; });\n\n/* harmony import */ var _interaction_Interaction__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./interaction/Interaction */ "./src/graphics/interaction/Interaction.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Interaction", function() { return _interaction_Interaction__WEBPACK_IMPORTED_MODULE_16__["Interaction"]; });\n\n/* harmony import */ var _interaction_areaPickInteraction__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./interaction/areaPickInteraction */ "./src/graphics/interaction/areaPickInteraction.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "areaPickInteraction", function() { return _interaction_areaPickInteraction__WEBPACK_IMPORTED_MODULE_17__["areaPickInteraction"]; });\n\n/* harmony import */ var _node_RectDomNode__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./node/RectDomNode */ "./src/graphics/node/RectDomNode.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RectDomNode", function() { return _node_RectDomNode__WEBPACK_IMPORTED_MODULE_18__["RectDomNode"]; });\n\n/* harmony import */ var _node_RectCanvasNode__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./node/RectCanvasNode */ "./src/graphics/node/RectCanvasNode.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RectCanvasNode", function() { return _node_RectCanvasNode__WEBPACK_IMPORTED_MODULE_19__["RectCanvasNode"]; });\n\n/* harmony import */ var _node_CircleCanvasNode__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./node/CircleCanvasNode */ "./src/graphics/node/CircleCanvasNode.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CircleCanvasNode", function() { return _node_CircleCanvasNode__WEBPACK_IMPORTED_MODULE_20__["CircleCanvasNode"]; });\n\n/* harmony import */ var _node_RectGroup__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./node/RectGroup */ "./src/graphics/node/RectGroup.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RectGroup", function() { return _node_RectGroup__WEBPACK_IMPORTED_MODULE_21__["RectGroup"]; });\n\n/* harmony import */ var _node_CircleGroup__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./node/CircleGroup */ "./src/graphics/node/CircleGroup.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CircleGroup", function() { return _node_CircleGroup__WEBPACK_IMPORTED_MODULE_22__["CircleGroup"]; });\n\n/* harmony import */ var _edge_Line__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./edge/Line */ "./src/graphics/edge/Line.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Line", function() { return _edge_Line__WEBPACK_IMPORTED_MODULE_23__["Line"]; });\n\n/* harmony import */ var _edge_L__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./edge/L */ "./src/graphics/edge/L.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "L", function() { return _edge_L__WEBPACK_IMPORTED_MODULE_24__["L"]; });\n\n/* harmony import */ var _utils_math2d__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./utils/math2d */ "./src/graphics/utils/math2d.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Math2d", function() { return _utils_math2d__WEBPACK_IMPORTED_MODULE_25__["Math2d"]; });\n\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Vector2d", function() { return _utils_vector2d__WEBPACK_IMPORTED_MODULE_26__["Vector2d"]; });\n\n/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./utils/utils */ "./src/graphics/utils/utils.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "throttle", function() { return _utils_utils__WEBPACK_IMPORTED_MODULE_27__["throttle"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "imgLoad", function() { return _utils_utils__WEBPACK_IMPORTED_MODULE_27__["imgLoad"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "applyMixins", function() { return _utils_utils__WEBPACK_IMPORTED_MODULE_27__["applyMixins"]; });\n\n/* harmony import */ var _utils_tree__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./utils/tree */ "./src/graphics/utils/tree.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TreeNode", function() { return _utils_tree__WEBPACK_IMPORTED_MODULE_28__["TreeNode"]; });\n\n\n\n\n\n\n\n // 模式\n\n // 交互\n\n\n\n\n\n\n\n\n\n\n // node\n\n\n\n\n\n // edge\n\n\n // utils\n\n\n\n\n\n\n//# sourceURL=webpack:///./src/graphics/index.ts?')},"./src/graphics/interaction/Interaction.ts":
/*!*************************************************!*\
  !*** ./src/graphics/interaction/Interaction.ts ***!
  \*************************************************/
/*! exports provided: Interaction, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Interaction", function() { return Interaction; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction noop(canvas, e) {}\n\nfunction noop2(canvas) {}\n\nclass Interaction {\n  constructor() {\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onClick", noop);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseDown", noop);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseMove", noop);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseUp", noop);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onDrop", noop);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onDragOver", noop);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onWheel", noop);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onContextMenu", noop);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onDblClick", noop);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onInstall", noop2);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onUninstall", noop2);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onUpdate", noop2);\n  }\n\n}\n/* harmony default export */ __webpack_exports__["default"] = (Interaction);\n\n//# sourceURL=webpack:///./src/graphics/interaction/Interaction.ts?')},"./src/graphics/interaction/areaPickInteraction.ts":
/*!*********************************************************!*\
  !*** ./src/graphics/interaction/areaPickInteraction.ts ***!
  \*********************************************************/
/*! exports provided: areaPickInteraction, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "areaPickInteraction", function() { return areaPickInteraction; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Interaction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Interaction */ "./src/graphics/interaction/Interaction.ts");\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n\n\n\nlet mousemovePositionCopy = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"]();\n\nclass AreaPickInteraction extends _Interaction__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(...args) {\n    super(...args);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "minDragDistance", 5);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "mouseDown", false);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onInstall", canvas => {\n      // 显示交互画布\n      canvas.topCanvasMount();\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onUninstall", canvas => {\n      // 移除交互画布\n      canvas.topCanvasCtx.clearRect(0, 0, canvas.viewWidth, canvas.viewHeight);\n      canvas.topCanvasUnmount();\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseDown", (canvas, e) => {\n      const {\n        button\n      } = e;\n      if (button !== 0) return;\n      this.mouseDown = true;\n      canvas.topCanvasCtx.fillStyle = \'rgba(41, 193, 248,0.3)\';\n      canvas.topCanvasCtx.strokeStyle = \'rgb(41, 193, 248)\';\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseMove", (canvas, e) => {\n      const {\n        mousedownPosition,\n        mousemovePosition,\n        topCanvasCtx,\n        viewWidth,\n        viewHeight,\n        graphCanvasCtx\n      } = canvas;\n      if (!this.mouseDown) return;\n      mousemovePositionCopy.copy(mousemovePosition);\n      const offset = mousemovePositionCopy.substract(mousedownPosition);\n      if (offset.magnitude < this.minDragDistance) return;\n      const p0 = canvas.viewportToCanvasCoordinate(mousedownPosition);\n      const p2 = canvas.viewportToCanvasCoordinate(mousemovePosition);\n      const p1 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](p0.x, p2.y);\n      const p3 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](p2.x, p0.y); // 绘制拖选框\n\n      topCanvasCtx.clearRect(0, 0, viewWidth, viewHeight);\n      topCanvasCtx.beginPath();\n      topCanvasCtx.moveTo(p0.x, p0.y);\n      topCanvasCtx.lineTo(p1.x, p1.y);\n      topCanvasCtx.lineTo(p2.x, p2.y);\n      topCanvasCtx.lineTo(p3.x, p3.y);\n      topCanvasCtx.closePath();\n      topCanvasCtx.fill();\n      topCanvasCtx.stroke();\n      let v0;\n      let v1;\n      let v2;\n      let v3;\n\n      if (mousedownPosition.x > mousemovePosition.x) {\n        if (mousedownPosition.y > mousemovePosition.y) {\n          v0 = canvas.viewportToPixelCoordinate(mousemovePosition);\n          v2 = canvas.viewportToPixelCoordinate(mousedownPosition);\n          v1 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](v2.x, v0.y);\n          v3 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](v0.x, v2.y);\n        } else {\n          v1 = canvas.viewportToPixelCoordinate(mousedownPosition);\n          v3 = canvas.viewportToPixelCoordinate(mousemovePosition);\n          v0 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](v3.x, v1.y);\n          v2 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](v1.x, v3.y);\n        }\n      } else {\n        if (mousedownPosition.y > mousemovePosition.y) {\n          v1 = canvas.viewportToPixelCoordinate(mousemovePosition);\n          v3 = canvas.viewportToPixelCoordinate(mousedownPosition);\n          v0 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](v3.x, v1.y);\n          v2 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](v1.x, v3.y);\n        } else {\n          v0 = canvas.viewportToPixelCoordinate(mousedownPosition);\n          v2 = canvas.viewportToPixelCoordinate(mousemovePosition);\n          v1 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](v2.x, v0.y);\n          v3 = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](v0.x, v2.y);\n        }\n      }\n\n      const rect = [v0, v1, v2, v3];\n      canvas.rootNode.getDescendantBF(node => {\n        const status = node.active;\n\n        if (node.isWrappedInRect(rect)) {\n          node.active = true;\n        } else {\n          node.active = false;\n        }\n\n        if (status !== node.active) {\n          node.isUpdate = true;\n        }\n      });\n      canvas.repaint = true;\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseUp", (canvas, e) => {\n      if (!this.mouseDown) return;\n      const {\n        topCanvasCtx,\n        viewWidth,\n        viewHeight\n      } = canvas;\n      this.mouseDown = false;\n      topCanvasCtx.clearRect(0, 0, viewWidth, viewHeight);\n    });\n  }\n\n}\n\nconst areaPickInteraction = new AreaPickInteraction();\n/* harmony default export */ __webpack_exports__["default"] = (areaPickInteraction);\n\n//# sourceURL=webpack:///./src/graphics/interaction/areaPickInteraction.ts?')},"./src/graphics/interaction/collapseAndExpandInteraction.ts":
/*!******************************************************************!*\
  !*** ./src/graphics/interaction/collapseAndExpandInteraction.ts ***!
  \******************************************************************/
/*! exports provided: collapseAndExpandInteraction, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "collapseAndExpandInteraction", function() { return collapseAndExpandInteraction; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Interaction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Interaction */ "./src/graphics/interaction/Interaction.ts");\n\n\n\n/**\r\n * 折叠与展开操作\r\n */\nclass CollapseAndExpandInteraction extends _Interaction__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(...args) {\n    super(...args);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onDblClick", canvas => {\n      const activeNode = canvas.getActiveNodes()[0];\n\n      if (activeNode && activeNode.isGroup) {\n        activeNode.isExpanded = !activeNode.isExpanded;\n        activeNode.isUpdate = true;\n        canvas.repaint = true;\n      }\n    });\n  }\n\n}\n\nconst collapseAndExpandInteraction = new CollapseAndExpandInteraction();\n/* harmony default export */ __webpack_exports__["default"] = (collapseAndExpandInteraction);\n\n//# sourceURL=webpack:///./src/graphics/interaction/collapseAndExpandInteraction.ts?')},"./src/graphics/interaction/createEdgeInteraction.ts":
/*!***********************************************************!*\
  !*** ./src/graphics/interaction/createEdgeInteraction.ts ***!
  \***********************************************************/
/*! exports provided: createEdgeInteraction, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createEdgeInteraction", function() { return createEdgeInteraction; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Interaction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Interaction */ "./src/graphics/interaction/Interaction.ts");\n/* harmony import */ var _core_Canvas__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/Canvas */ "./src/graphics/core/Canvas.ts");\n/* harmony import */ var _edge_Line__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../edge/Line */ "./src/graphics/edge/Line.ts");\n\n\n\n\n/**\r\n * 连线（直线）\r\n */\n\nclass CreateEdgeInteraction extends _Interaction__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(...args) {\n    super(...args);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "targetNode", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "sourceNode", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "edge", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseUp", canvas => {\n      if (this.edge) {\n        canvas.rootNode.getDescendantDF(node => {\n          if (node.isPointIn()) {\n            this.targetNode = node;\n            return true;\n          }\n        });\n\n        if (this.targetNode && this.targetNode !== this.sourceNode) {\n          this.edge.targetNode = this.targetNode;\n          this.targetNode.addEdge(this.edge);\n          canvas.virtualNode.removeEdge(this.edge);\n          this.targetNode.isUpdate = true;\n          this.edge = undefined;\n          this.targetNode = undefined;\n          this.sourceNode = undefined;\n        } else {\n          canvas.removeEdge(this.edge);\n          this.edge = undefined;\n          this.targetNode = undefined;\n          this.sourceNode = undefined;\n        }\n      } else {\n        canvas.rootNode.getDescendantDF(node => {\n          if (node.isPointIn()) {\n            this.sourceNode = node;\n            return true;\n          }\n        });\n\n        if (this.sourceNode) {\n          // this.edge = new Line({\n          //   sourceNode: this.sourceNode,\n          //   targetNode: canvas.virtualNode,\n          //   arrow: true,\n          //   text: \'\'\n          // })\n          this.edge = new _edge_Line__WEBPACK_IMPORTED_MODULE_3__["default"]({\n            sourceNode: this.sourceNode,\n            targetNode: canvas.virtualNode,\n            arrow: _core_Canvas__WEBPACK_IMPORTED_MODULE_2__["default"].config.createLineOptions.arrow,\n            text: _core_Canvas__WEBPACK_IMPORTED_MODULE_2__["default"].config.createLineOptions.text\n          });\n          canvas.addEdge(this.edge);\n        }\n      }\n\n      canvas.repaint = true;\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseMove", canvas => {\n      canvas.virtualNode.position = canvas.viewportToPixelCoordinate(canvas.mousemovePosition);\n\n      if (this.sourceNode) {\n        canvas.virtualNode.isUpdate = true;\n      }\n\n      canvas.repaint = true;\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onUninstall", canvas => {\n      if (this.edge) {\n        canvas.removeEdge(this.edge);\n        this.edge = undefined;\n        this.targetNode = undefined;\n        this.sourceNode = undefined;\n      }\n\n      canvas.repaint = true;\n    });\n  }\n\n}\n\nconst createEdgeInteraction = new CreateEdgeInteraction();\n/* harmony default export */ __webpack_exports__["default"] = (createEdgeInteraction);\n\n//# sourceURL=webpack:///./src/graphics/interaction/createEdgeInteraction.ts?')},"./src/graphics/interaction/createGroupInteraction.ts":
/*!************************************************************!*\
  !*** ./src/graphics/interaction/createGroupInteraction.ts ***!
  \************************************************************/
/*! exports provided: createGroupInteraction, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createGroupInteraction", function() { return createGroupInteraction; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Interaction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Interaction */ "./src/graphics/interaction/Interaction.ts");\n/* harmony import */ var _node_RectGroup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../node/RectGroup */ "./src/graphics/node/RectGroup.ts");\n\n\n\n\nclass CreateGroupInteraction extends _Interaction__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(...args) {\n    super(...args);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "canvas", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onContextMenu", (canvas, e) => {\n      const event = e;\n      const activeNodes = canvas.getActiveNodes();\n      canvas.contextMenu.hide();\n\n      if (activeNodes.length) {\n        canvas.contextMenu.menu = [{\n          label: \'添加到组\',\n          command: \'addToGroup\'\n        }];\n        canvas.contextMenu.show(event.clientX, event.clientY);\n      }\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onInstall", canvas => {\n      this.canvas = canvas;\n      canvas.eventEmitter.on(\'canvas:menu\', this.onAddToGroup);\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onUninstall", canvas => {\n      canvas.eventEmitter.off(\'canvas:menu\', this.onAddToGroup);\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onAddToGroup", command => {\n      if (command !== \'addToGroup\') return;\n      const activeNodes = this.canvas.rootNode.children.filter(node => node.active);\n      if (!activeNodes.length) return;\n      const group = new _node_RectGroup__WEBPACK_IMPORTED_MODULE_2__["default"]({\n        width: 200,\n        height: 200,\n        id: \'group\',\n        x: 0,\n        y: 0\n      });\n      let xMin = Number.MAX_SAFE_INTEGER;\n      let yMin = Number.MAX_SAFE_INTEGER;\n      let xMax = Number.MIN_SAFE_INTEGER;\n      let yMax = Number.MIN_SAFE_INTEGER;\n      activeNodes.forEach(node => {\n        node.boundingRect.forEach(point => {\n          if (point.x < xMin) {\n            xMin = point.x;\n          }\n\n          if (point.x > xMax) {\n            xMax = point.x;\n          }\n\n          if (point.y < yMin) {\n            yMin = point.y;\n          }\n\n          if (point.y > yMax) {\n            yMax = point.y;\n          }\n        }); // 将节点从原来的父节点中删除\n\n        if (node.parent) {\n          node.parent.removeChild(node, false);\n        }\n\n        group.addChild(node);\n      });\n      group.width = xMax - xMin + 40;\n      group.height = yMax - yMin + 40;\n      group.position.x = xMin - 20;\n      group.position.y = yMin - 20;\n      this.canvas.addNode(group);\n    });\n  }\n\n}\n\nconst createGroupInteraction = new CreateGroupInteraction();\n/* harmony default export */ __webpack_exports__["default"] = (createGroupInteraction);\n\n//# sourceURL=webpack:///./src/graphics/interaction/createGroupInteraction.ts?')},"./src/graphics/interaction/createLInteraction.ts":
/*!********************************************************!*\
  !*** ./src/graphics/interaction/createLInteraction.ts ***!
  \********************************************************/
/*! exports provided: createLInteraction, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createLInteraction", function() { return createLInteraction; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Interaction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Interaction */ "./src/graphics/interaction/Interaction.ts");\n/* harmony import */ var _edge_L__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../edge/L */ "./src/graphics/edge/L.ts");\n\n\n\n/**\r\n * 连线（L型）\r\n */\n\nclass CreateLInteraction extends _Interaction__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(...args) {\n    super(...args);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "targetNode", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "sourceNode", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "edge", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseUp", canvas => {\n      if (this.edge) {\n        canvas.rootNode.getDescendantDF(node => {\n          if (node.isPointIn()) {\n            this.targetNode = node;\n            return true;\n          }\n        });\n\n        if (this.targetNode && this.targetNode !== this.sourceNode) {\n          this.edge.targetNode = this.targetNode;\n          this.targetNode.addEdge(this.edge);\n          canvas.virtualNode.removeEdge(this.edge);\n          this.edge.arrow = true;\n          this.targetNode.isUpdate = true;\n          this.edge = undefined;\n          this.targetNode = undefined;\n          this.sourceNode = undefined;\n        } else {\n          canvas.removeEdge(this.edge);\n          this.edge = undefined;\n          this.targetNode = undefined;\n          this.sourceNode = undefined;\n        }\n      } else {\n        canvas.rootNode.getDescendantDF(node => {\n          if (node.isPointIn()) {\n            this.sourceNode = node;\n            return true;\n          }\n        });\n\n        if (this.sourceNode) {\n          this.edge = new _edge_L__WEBPACK_IMPORTED_MODULE_2__["default"]({\n            sourceNode: this.sourceNode,\n            targetNode: canvas.virtualNode,\n            dash: false,\n            arrow: false,\n            text: \'\'\n          });\n          canvas.addEdge(this.edge);\n        }\n      }\n\n      canvas.repaint = true;\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseMove", canvas => {\n      canvas.virtualNode.position = canvas.viewportToPixelCoordinate(canvas.mousemovePosition);\n\n      if (this.sourceNode) {\n        canvas.virtualNode.isUpdate = true;\n      }\n\n      canvas.repaint = true;\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onUninstall", canvas => {\n      if (this.edge) {\n        canvas.removeEdge(this.edge);\n        this.edge = undefined;\n        this.targetNode = undefined;\n        this.sourceNode = undefined;\n      }\n\n      canvas.repaint = true;\n    });\n  }\n\n}\n\nconst createLInteraction = new CreateLInteraction();\n/* harmony default export */ __webpack_exports__["default"] = (createLInteraction);\n\n//# sourceURL=webpack:///./src/graphics/interaction/createLInteraction.ts?')},"./src/graphics/interaction/dragInteraction.ts":
/*!*****************************************************!*\
  !*** ./src/graphics/interaction/dragInteraction.ts ***!
  \*****************************************************/
/*! exports provided: dragInteraction, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dragInteraction", function() { return dragInteraction; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Interaction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Interaction */ "./src/graphics/interaction/Interaction.ts");\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n\n\n\n/**\r\n * 可拖拽图元或整个画布\r\n * 前置依赖：selectInteraction\r\n */\n\nclass DragInteraction extends _Interaction__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(...args) {\n    super(...args);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "minDragDistance", 3);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "moveNodes", []);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "mousedown", false);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "lastCoordinate", new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"]());\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseDown", canvas => {\n      const activeNodes = canvas.getActiveNodes();\n\n      if (activeNodes.length) {\n        this.moveNodes = [...activeNodes];\n      } else {\n        this.moveNodes = [...canvas.rootNode.children];\n      }\n\n      this.mousedown = true;\n      this.lastCoordinate.copy(canvas.mousedownPosition);\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseMove", canvas => {\n      if (!this.mousedown) return; // 移动距离太小，认为是误操作，过滤掉\n\n      if (_utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"].copy(canvas.mousemovePosition).substract(canvas.mousedownPosition).magnitude < this.minDragDistance) return;\n      const offset = _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"].copy(canvas.mousemovePosition).substract(this.lastCoordinate);\n      this.lastCoordinate.copy(canvas.mousemovePosition);\n      const pixelOffset = offset.scale(1 / canvas.canvasScale);\n      this.moveNodes.forEach(node => {\n        node.translate(pixelOffset);\n      });\n      canvas.repaint = true;\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseUp", canvas => {\n      if (this.moveNodes.length === 1) {\n        const activeNode = this.moveNodes[0];\n        let wrap = false;\n        canvas.rootNode.getDescendantDF(node => {\n          if (node !== activeNode && node.isGroup && activeNode.isWrappedInRect(node.boundingRect)) {\n            node.addChild(activeNode);\n            return wrap = true;\n          }\n        });\n\n        if (!wrap) {\n          canvas.rootNode.addChild(activeNode);\n        }\n      }\n\n      this.moveNodes = [];\n      this.mousedown = false;\n    });\n  }\n\n}\n\nconst dragInteraction = new DragInteraction();\n/* harmony default export */ __webpack_exports__["default"] = (dragInteraction);\n\n//# sourceURL=webpack:///./src/graphics/interaction/dragInteraction.ts?')},"./src/graphics/interaction/dropInteraction.ts":
/*!*****************************************************!*\
  !*** ./src/graphics/interaction/dropInteraction.ts ***!
  \*****************************************************/
/*! exports provided: dropInteraction, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dropInteraction", function() { return dropInteraction; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Interaction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Interaction */ "./src/graphics/interaction/Interaction.ts");\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n\n\n\n/**\r\n * drop\r\n */\n\nclass DropInteraction extends _Interaction__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(...args) {\n    super(...args);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onDrop", (canvas, e) => {\n      const event = e;\n      canvas.eventEmitter.emit(\'canvas:drop\', {\n        coordinate: canvas.viewportToPixelCoordinate(new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["Vector2d"](event.clientX, event.clientY)),\n        dataTransfer: event.dataTransfer\n      });\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onDragOver", (canvas, e) => {\n      e.preventDefault();\n    });\n  }\n\n}\n\nconst dropInteraction = new DropInteraction();\n/* harmony default export */ __webpack_exports__["default"] = (dropInteraction);\n\n//# sourceURL=webpack:///./src/graphics/interaction/dropInteraction.ts?')},"./src/graphics/interaction/menuInteraction.ts":
/*!*****************************************************!*\
  !*** ./src/graphics/interaction/menuInteraction.ts ***!
  \*****************************************************/
/*! exports provided: menuInteration, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"menuInteration\", function() { return menuInteration; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Interaction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Interaction */ \"./src/graphics/interaction/Interaction.ts\");\n\n\n\nclass MenuInteraction extends _Interaction__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n  constructor(...args) {\n    super(...args);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"onContextMenu\", (canvas, e) => {\n      const event = e;\n      canvas.contextMenu.hide();\n      const activeNodes = canvas.getActiveNodes();\n      const activeEdges = canvas.getActiveEdges();\n\n      if (activeNodes.length) {\n        canvas.contextMenu.menu = [{\n          label: '重命名',\n          command: 'rename'\n        }, {\n          label: '删除',\n          command: 'remove'\n        }];\n      } else if (activeEdges.length) {\n        canvas.contextMenu.menu = [{\n          label: '删除',\n          command: 'remove'\n        }];\n      } else {\n        canvas.contextMenu.menu = [{\n          label: '放大',\n          command: 'zoomIn'\n        }, {\n          label: '缩小',\n          command: 'zoomOut'\n        }];\n      }\n\n      canvas.contextMenu.show(event.clientX, event.clientY);\n    });\n  }\n\n}\n\nconst menuInteration = new MenuInteraction();\n/* harmony default export */ __webpack_exports__[\"default\"] = (menuInteration);\n\n//# sourceURL=webpack:///./src/graphics/interaction/menuInteraction.ts?")},"./src/graphics/interaction/moveCanvasInteraction.ts":
/*!***********************************************************!*\
  !*** ./src/graphics/interaction/moveCanvasInteraction.ts ***!
  \***********************************************************/
/*! exports provided: moveCanvasInteraction, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "moveCanvasInteraction", function() { return moveCanvasInteraction; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Interaction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Interaction */ "./src/graphics/interaction/Interaction.ts");\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n\n\n\n/**\r\n * 拖动整个画布\r\n */\n\nclass MoveCanvasInteraction extends _Interaction__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(...args) {\n    super(...args);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "minDragDistance", 3);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "moveNodes", []);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "mouseDown", false);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "move", false);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "lastCoordinate", new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["Vector2d"]());\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseDown", canvas => {\n      this.mouseDown = true;\n      this.moveNodes = [...canvas.rootNode.children];\n      this.lastCoordinate.copy(canvas.mousedownPosition);\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseMove", canvas => {\n      if (!this.mouseDown) return; // 移动距离太小，认为是误操作，过滤掉\n\n      if (_utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["Vector2d"].copy(canvas.mousemovePosition).substract(canvas.mousedownPosition).magnitude < this.minDragDistance) return;\n      const offset = _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["Vector2d"].copy(canvas.mousemovePosition).substract(this.lastCoordinate);\n      this.lastCoordinate.copy(canvas.mousemovePosition);\n      this.move = true;\n      const pixelOffset = offset.scale(1 / canvas.canvasScale);\n      this.moveNodes.forEach(node => {\n        node.translate(pixelOffset);\n      });\n      canvas.repaint = true;\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseUp", canvas => {\n      this.moveNodes = [];\n      this.mouseDown = false;\n\n      if (this.move) {\n        canvas.eventEmitter.emit(\'interaction:canvasMoveEnd\');\n        this.move = false;\n      }\n    });\n  }\n\n}\n\nconst moveCanvasInteraction = new MoveCanvasInteraction();\n/* harmony default export */ __webpack_exports__["default"] = (moveCanvasInteraction);\n\n//# sourceURL=webpack:///./src/graphics/interaction/moveCanvasInteraction.ts?')},"./src/graphics/interaction/resizeInteraction.ts":
/*!*******************************************************!*\
  !*** ./src/graphics/interaction/resizeInteraction.ts ***!
  \*******************************************************/
/*! exports provided: resizeInteraction, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resizeInteraction", function() { return resizeInteraction; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Interaction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Interaction */ "./src/graphics/interaction/Interaction.ts");\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n/* harmony import */ var _utils_math2d__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/math2d */ "./src/graphics/utils/math2d.ts");\n/* harmony import */ var _selectInteraction__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./selectInteraction */ "./src/graphics/interaction/selectInteraction.ts");\n/* harmony import */ var _dragInteraction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./dragInteraction */ "./src/graphics/interaction/dragInteraction.ts");\n\n\n\n\n\n\nconst anchorPositionOffset = new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](-3, -3);\n\nclass ResizeInteraction extends _Interaction__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(...args) {\n    super(...args);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "activeNode", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "flag", false);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "activeAnchorIndex", -1);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onInstall", canvas => {\n      // 显示交互画布\n      canvas.topCanvasMount();\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onUninstall", canvas => {\n      // 移除交互画布\n      canvas.topCanvasCtx.clearRect(0, 0, canvas.viewWidth, canvas.viewHeight);\n      canvas.topCanvasUnmount();\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseUp", canvas => {\n      this.activeAnchorIndex = -1;\n      _dragInteraction__WEBPACK_IMPORTED_MODULE_5__["default"].onMouseUp(canvas);\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseDown", canvas => {\n      this.activeAnchorIndex = this.getActiveAnchorIndex(canvas);\n\n      if (this.activeAnchorIndex === -1) {\n        _selectInteraction__WEBPACK_IMPORTED_MODULE_4__["default"].onMouseDown(canvas);\n        _dragInteraction__WEBPACK_IMPORTED_MODULE_5__["default"].onMouseDown(canvas);\n        const activeNode = canvas.getActiveNodes()[0];\n\n        if (activeNode && activeNode.canResize && activeNode.isExpanded) {\n          this.activeNode = activeNode;\n        } else {\n          this.activeNode = undefined;\n        }\n      }\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseMove", (canvas, e) => {\n      const activeNode = this.activeNode;\n\n      if (this.activeAnchorIndex > -1 && activeNode) {\n        const event = e;\n        const coordinate = canvas.viewportToPixelCoordinate(new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](event.clientX, event.clientY));\n        activeNode.isUpdate = true;\n        canvas.repaint = true;\n\n        if (activeNode.shapeType === \'rect\') {\n          resizeRectNode(activeNode, this.activeAnchorIndex, coordinate);\n        } else {\n          resizeCircleNode(activeNode, this.activeAnchorIndex, coordinate);\n        }\n\n        activeNode.render();\n      } else {\n        const index = this.getActiveAnchorIndex(canvas);\n        let mouseCursor = \'default\';\n\n        if (index > -1) {\n          switch (index) {\n            case 0:\n              // 西北\n              mouseCursor = \'nwse-resize\';\n              break;\n\n            case 1:\n              // 东北\n              mouseCursor = \'nesw-resize\';\n              break;\n\n            case 2:\n              // 东南\n              mouseCursor = \'nwse-resize\';\n              break;\n\n            case 3:\n              // 西南\n              mouseCursor = \'nesw-resize\';\n              break;\n\n            case 4:\n              // 北\n              mouseCursor = \'ns-resize\';\n              break;\n\n            case 5:\n              // 东\n              mouseCursor = \'ew-resize\';\n              break;\n\n            case 6:\n              // 南\n              mouseCursor = \'ns-resize\';\n              break;\n\n            case 7:\n              // 西\n              mouseCursor = \'ew-resize\';\n              break;\n          }\n        } else {\n          _dragInteraction__WEBPACK_IMPORTED_MODULE_5__["default"].onMouseMove(canvas);\n        }\n\n        canvas.wrapper.style.cursor = mouseCursor;\n      }\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onUpdate", canvas => {\n      canvas.topCanvasCtx.clearRect(0, 0, canvas.viewWidth, canvas.viewHeight);\n\n      if (this.activeNode) {\n        const points = [...this.activeNode.boundingRect, ...this.activeNode.boundingJoinPoints];\n        canvas.topCanvasCtx.save();\n        canvas.topCanvasCtx.fillStyle = \'#2D8CF5\';\n        canvas.topCanvasCtx.beginPath();\n        points.forEach(point => {\n          const canvasCoordinate = canvas.pixelToCanvasCoordinate(point);\n          canvas.topCanvasCtx.rect(canvasCoordinate.x - 3, canvasCoordinate.y - 3, 6, 6);\n          canvas.topCanvasCtx.fill();\n        });\n        canvas.topCanvasCtx.restore();\n      }\n    });\n  }\n\n  getActiveAnchorIndex(canvas) {\n    if (!this.activeNode) return -1;\n    const points = [...this.activeNode.boundingRect, ...this.activeNode.boundingJoinPoints];\n    let index = 0;\n    const anchor = points.find((point, i) => {\n      const anchorRectPosition = canvas.pixelToViewportCoordinate(point).add(anchorPositionOffset);\n      index = i;\n      return _utils_math2d__WEBPACK_IMPORTED_MODULE_3__["default"].isPointInRect(canvas.mousemovePosition, anchorRectPosition, 6, 6);\n    });\n    if (!anchor) return -1;\n    return index;\n  }\n\n}\n/**\r\n * 矩形\r\n * @param activeNode \r\n * @param anchorIndex \r\n * @param coordinate \r\n */\n\n\nfunction resizeRectNode(activeNode, anchorIndex, coordinate) {\n  const nodeBoundingRect = activeNode.boundingRect;\n  let currentWidth = activeNode.width;\n  let currentHeight = activeNode.height;\n\n  switch (anchorIndex) {\n    case 0:\n      // 西北\n      currentWidth = nodeBoundingRect[2].x - coordinate.x;\n      currentHeight = nodeBoundingRect[2].y - coordinate.y;\n\n      if (currentWidth >= activeNode.minWidth) {\n        activeNode.position.x = coordinate.x;\n        activeNode.width = currentWidth;\n      }\n\n      if (currentHeight >= activeNode.minHeight) {\n        activeNode.position.y = coordinate.y;\n        activeNode.height = currentHeight;\n      }\n\n      break;\n\n    case 1:\n      // 东北\n      currentWidth = coordinate.x - nodeBoundingRect[3].x;\n      currentHeight = nodeBoundingRect[3].y - coordinate.y;\n\n      if (currentWidth >= activeNode.minWidth) {\n        activeNode.width = currentWidth;\n      }\n\n      if (currentHeight >= activeNode.minHeight) {\n        activeNode.position.y = coordinate.y;\n        activeNode.height = currentHeight;\n      }\n\n      break;\n\n    case 2:\n      // 东南\n      currentWidth = coordinate.x - nodeBoundingRect[0].x;\n      currentHeight = coordinate.y - nodeBoundingRect[0].y;\n\n      if (currentWidth >= activeNode.minWidth) {\n        activeNode.width = currentWidth;\n      }\n\n      if (currentHeight >= activeNode.minHeight) {\n        activeNode.height = currentHeight;\n      }\n\n      break;\n\n    case 3:\n      // 西南\n      currentWidth = nodeBoundingRect[1].x - coordinate.x;\n      currentHeight = coordinate.y - nodeBoundingRect[1].y;\n\n      if (currentWidth >= activeNode.minWidth) {\n        activeNode.position.x = coordinate.x;\n        activeNode.width = currentWidth;\n      }\n\n      if (currentHeight >= activeNode.minHeight) {\n        activeNode.height = currentHeight;\n      }\n\n      break;\n\n    case 4:\n      // 北\n      currentHeight = nodeBoundingRect[2].y - coordinate.y;\n\n      if (currentHeight >= activeNode.minHeight) {\n        activeNode.position.y = coordinate.y;\n        activeNode.height = currentHeight;\n      }\n\n      break;\n\n    case 5:\n      // 东\n      currentWidth = coordinate.x - nodeBoundingRect[0].x;\n\n      if (currentWidth >= activeNode.minWidth) {\n        activeNode.width = currentWidth;\n      }\n\n      break;\n\n    case 6:\n      // 南\n      currentHeight = coordinate.y - nodeBoundingRect[0].y;\n\n      if (currentHeight >= activeNode.minHeight) {\n        activeNode.height = currentHeight;\n      }\n\n      break;\n\n    case 7:\n      // 西\n      currentWidth = nodeBoundingRect[2].x - coordinate.x;\n\n      if (currentWidth >= activeNode.minWidth) {\n        activeNode.position.x = coordinate.x;\n        activeNode.width = currentWidth;\n      }\n\n      break;\n  }\n}\n/**\r\n * 圆形\r\n * @param activeNode \r\n * @param anchorIndex \r\n * @param coordinate \r\n */\n\n\nfunction resizeCircleNode(activeNode, anchorIndex, coordinate) {\n  let currentRadius = activeNode.radius;\n  let minRadius = activeNode.minRadius;\n  const center = activeNode.centerPoint;\n\n  switch (anchorIndex) {\n    case 0: // 西北\n\n    case 1: // 东北\n\n    case 2: // 东南\n\n    case 3:\n      // 西南\n      currentRadius = _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"].copy(coordinate).substract(center).magnitude / Math.sqrt(2);\n      break;\n\n    case 4: // 北\n\n    case 5: // 东\n\n    case 6: // 南\n\n    case 7:\n      // 西\n      currentRadius = _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"].copy(coordinate).substract(center).magnitude;\n      break;\n  }\n\n  if (currentRadius >= minRadius) {\n    activeNode.radius = currentRadius;\n    activeNode.position.y = center.y - currentRadius;\n    activeNode.position.x = center.x - currentRadius;\n  }\n}\n\nconst resizeInteraction = new ResizeInteraction();\n/* harmony default export */ __webpack_exports__["default"] = (resizeInteraction);\n\n//# sourceURL=webpack:///./src/graphics/interaction/resizeInteraction.ts?')},"./src/graphics/interaction/selectInteraction.ts":
/*!*******************************************************!*\
  !*** ./src/graphics/interaction/selectInteraction.ts ***!
  \*******************************************************/
/*! exports provided: selectInteraction, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectInteraction", function() { return selectInteraction; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Interaction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Interaction */ "./src/graphics/interaction/Interaction.ts");\n\n\n\nclass SelectInteraction extends _Interaction__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(...args) {\n    super(...args);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onMouseDown", canvas => {\n      let activeNode;\n      let activeEdge;\n      const sign = Math.random();\n      canvas.rootNode.getDescendantDF(node => {\n        if (\n        /* 已存在激活图元或本身不可见 */\n        activeNode || activeEdge || !node.visible) {\n          node.active = false;\n        } else {\n          node.active = node.isPointIn();\n\n          if (node.active) {\n            activeNode = node;\n            canvas.setNodeTop(node);\n          }\n        }\n\n        node.isUpdate = true;\n        node.edges.forEach(edge => {\n          if (\n          /* 是否已遍历 */\n          edge.renderSign === sign) return;\n          edge.renderSign = sign;\n          edge.active = false;\n          if (\n          /* 已存在激活图元 */\n          activeEdge || activeNode) return;\n          if (\n          /* 边线不可见 */\n          !edge.sourceNode.visible && !edge.targetNode.visible) return;\n          edge.active = edge.isPointIn();\n\n          if (edge.active) {\n            activeEdge = edge;\n          }\n        });\n      });\n      canvas.repaint = true;\n    });\n  }\n\n}\n\nconst selectInteraction = new SelectInteraction();\n/* harmony default export */ __webpack_exports__["default"] = (selectInteraction);\n\n//# sourceURL=webpack:///./src/graphics/interaction/selectInteraction.ts?')},"./src/graphics/interaction/wheelZoomInteraction.ts":
/*!**********************************************************!*\
  !*** ./src/graphics/interaction/wheelZoomInteraction.ts ***!
  \**********************************************************/
/*! exports provided: wheelZoomInteraction, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "wheelZoomInteraction", function() { return wheelZoomInteraction; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Interaction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Interaction */ "./src/graphics/interaction/Interaction.ts");\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n\n\n\n/**\r\n * 滚轮缩放\r\n */\n\nclass WheelZoomInteraction extends _Interaction__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(...args) {\n    super(...args);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onWheel", (canvas, e) => {\n      const {\n        deltaY,\n        clientX,\n        clientY\n      } = e;\n\n      if (deltaY > 0) {\n        canvas.zoomOut(new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["Vector2d"](clientX, clientY));\n      } else {\n        canvas.zoomIn(new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["Vector2d"](clientX, clientY));\n      }\n    });\n  }\n\n}\n\nconst wheelZoomInteraction = new WheelZoomInteraction();\n/* harmony default export */ __webpack_exports__["default"] = (wheelZoomInteraction);\n\n//# sourceURL=webpack:///./src/graphics/interaction/wheelZoomInteraction.ts?')},"./src/graphics/mode/modes.ts":
/*!************************************!*\
  !*** ./src/graphics/mode/modes.ts ***!
  \************************************/
/*! exports provided: MODE_DEFAULT, MODE_VIEW, MODE_CREATE_EDGE, MODE_CREATE_L, MODE_AREA_PICK, MODE_BORDER, modes, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MODE_DEFAULT", function() { return MODE_DEFAULT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MODE_VIEW", function() { return MODE_VIEW; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MODE_CREATE_EDGE", function() { return MODE_CREATE_EDGE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MODE_CREATE_L", function() { return MODE_CREATE_L; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MODE_AREA_PICK", function() { return MODE_AREA_PICK; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MODE_BORDER", function() { return MODE_BORDER; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modes", function() { return modes; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _interaction_dragInteraction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../interaction/dragInteraction */ "./src/graphics/interaction/dragInteraction.ts");\n/* harmony import */ var _interaction_dropInteraction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../interaction/dropInteraction */ "./src/graphics/interaction/dropInteraction.ts");\n/* harmony import */ var _interaction_moveCanvasInteraction__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../interaction/moveCanvasInteraction */ "./src/graphics/interaction/moveCanvasInteraction.ts");\n/* harmony import */ var _interaction_wheelZoomInteraction__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../interaction/wheelZoomInteraction */ "./src/graphics/interaction/wheelZoomInteraction.ts");\n/* harmony import */ var _interaction_createEdgeInteraction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../interaction/createEdgeInteraction */ "./src/graphics/interaction/createEdgeInteraction.ts");\n/* harmony import */ var _interaction_createLInteraction__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../interaction/createLInteraction */ "./src/graphics/interaction/createLInteraction.ts");\n/* harmony import */ var _interaction_selectInteraction__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../interaction/selectInteraction */ "./src/graphics/interaction/selectInteraction.ts");\n/* harmony import */ var _interaction_menuInteraction__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../interaction/menuInteraction */ "./src/graphics/interaction/menuInteraction.ts");\n/* harmony import */ var _interaction_areaPickInteraction__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../interaction/areaPickInteraction */ "./src/graphics/interaction/areaPickInteraction.ts");\n/* harmony import */ var _interaction_createGroupInteraction__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../interaction/createGroupInteraction */ "./src/graphics/interaction/createGroupInteraction.ts");\n/* harmony import */ var _interaction_resizeInteraction__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../interaction/resizeInteraction */ "./src/graphics/interaction/resizeInteraction.ts");\n/* harmony import */ var _interaction_collapseAndExpandInteraction__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../interaction/collapseAndExpandInteraction */ "./src/graphics/interaction/collapseAndExpandInteraction.ts");\n\n\n\n\n\n\n\n\n\n\n\n\n // 默认模式\n\nconst MODE_DEFAULT = \'mode.default\'; // 查看模式\n\nconst MODE_VIEW = \'mode.view\'; // 创建连线\n\nconst MODE_CREATE_EDGE = \'mode.create.edge\'; // 创建L型连线\n\nconst MODE_CREATE_L = \'mode.create.L\'; // 框选模式\n\nconst MODE_AREA_PICK = \'mode.area.pick\'; // 边框模式\n\nconst MODE_BORDER = \'mode.border\';\nconst modes = {\n  [MODE_DEFAULT]: [_interaction_selectInteraction__WEBPACK_IMPORTED_MODULE_7__["default"], _interaction_dragInteraction__WEBPACK_IMPORTED_MODULE_1__["default"], _interaction_dropInteraction__WEBPACK_IMPORTED_MODULE_2__["default"], _interaction_wheelZoomInteraction__WEBPACK_IMPORTED_MODULE_4__["default"], _interaction_menuInteraction__WEBPACK_IMPORTED_MODULE_8__["default"], _interaction_collapseAndExpandInteraction__WEBPACK_IMPORTED_MODULE_12__["default"]],\n  [MODE_VIEW]: [_interaction_moveCanvasInteraction__WEBPACK_IMPORTED_MODULE_3__["default"], _interaction_wheelZoomInteraction__WEBPACK_IMPORTED_MODULE_4__["default"]],\n  [MODE_CREATE_EDGE]: [_interaction_selectInteraction__WEBPACK_IMPORTED_MODULE_7__["default"], _interaction_wheelZoomInteraction__WEBPACK_IMPORTED_MODULE_4__["default"], _interaction_createEdgeInteraction__WEBPACK_IMPORTED_MODULE_5__["default"], _interaction_moveCanvasInteraction__WEBPACK_IMPORTED_MODULE_3__["default"]],\n  [MODE_CREATE_L]: [_interaction_selectInteraction__WEBPACK_IMPORTED_MODULE_7__["default"], _interaction_wheelZoomInteraction__WEBPACK_IMPORTED_MODULE_4__["default"], _interaction_createLInteraction__WEBPACK_IMPORTED_MODULE_6__["default"], _interaction_moveCanvasInteraction__WEBPACK_IMPORTED_MODULE_3__["default"]],\n  [MODE_AREA_PICK]: [_interaction_wheelZoomInteraction__WEBPACK_IMPORTED_MODULE_4__["default"], _interaction_areaPickInteraction__WEBPACK_IMPORTED_MODULE_9__["default"], _interaction_createGroupInteraction__WEBPACK_IMPORTED_MODULE_10__["default"]],\n  [MODE_BORDER]: [_interaction_resizeInteraction__WEBPACK_IMPORTED_MODULE_11__["default"], _interaction_wheelZoomInteraction__WEBPACK_IMPORTED_MODULE_4__["default"]]\n  /**\r\n   * 模式管理器\r\n   */\n\n};\n\nclass ModeManager {\n  constructor() {\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "modes", {});\n  }\n\n  /**\r\n   * 注册一个模式\r\n   * @param modeName \r\n   * @param interactions \r\n   */\n  registerMode(modeName, interactions) {\n    this.modes[modeName] = interactions;\n  }\n  /**\r\n   * 注销一个模式\r\n   * @param modeName \r\n   */\n\n\n  unregisterMode(modeName) {\n    delete this.modes[modeName];\n  }\n  /**\r\n   * 使用\r\n   * @param modeName \r\n   */\n\n\n  use(modeName) {\n    return this.modes[modeName] || [];\n  }\n  /**\r\n   * 检车是否存在指定模式\r\n   * @param modeName \r\n   */\n\n\n  hasMode(modeName) {\n    return this.modes.hasOwnProperty(modeName);\n  }\n\n}\n\nconst modeManager = new ModeManager();\nmodeManager.registerMode(MODE_DEFAULT, [_interaction_selectInteraction__WEBPACK_IMPORTED_MODULE_7__["default"], _interaction_dragInteraction__WEBPACK_IMPORTED_MODULE_1__["default"], _interaction_dropInteraction__WEBPACK_IMPORTED_MODULE_2__["default"], _interaction_wheelZoomInteraction__WEBPACK_IMPORTED_MODULE_4__["default"], _interaction_menuInteraction__WEBPACK_IMPORTED_MODULE_8__["default"], _interaction_collapseAndExpandInteraction__WEBPACK_IMPORTED_MODULE_12__["default"]]);\nmodeManager.registerMode(MODE_VIEW, [_interaction_moveCanvasInteraction__WEBPACK_IMPORTED_MODULE_3__["default"], _interaction_wheelZoomInteraction__WEBPACK_IMPORTED_MODULE_4__["default"]]);\nmodeManager.registerMode(MODE_CREATE_EDGE, [_interaction_selectInteraction__WEBPACK_IMPORTED_MODULE_7__["default"], _interaction_wheelZoomInteraction__WEBPACK_IMPORTED_MODULE_4__["default"], _interaction_createEdgeInteraction__WEBPACK_IMPORTED_MODULE_5__["default"], _interaction_moveCanvasInteraction__WEBPACK_IMPORTED_MODULE_3__["default"]]);\nmodeManager.registerMode(MODE_CREATE_L, [_interaction_selectInteraction__WEBPACK_IMPORTED_MODULE_7__["default"], _interaction_wheelZoomInteraction__WEBPACK_IMPORTED_MODULE_4__["default"], _interaction_createLInteraction__WEBPACK_IMPORTED_MODULE_6__["default"], _interaction_moveCanvasInteraction__WEBPACK_IMPORTED_MODULE_3__["default"]]);\nmodeManager.registerMode(MODE_AREA_PICK, [_interaction_wheelZoomInteraction__WEBPACK_IMPORTED_MODULE_4__["default"], _interaction_areaPickInteraction__WEBPACK_IMPORTED_MODULE_9__["default"], _interaction_createGroupInteraction__WEBPACK_IMPORTED_MODULE_10__["default"]]);\nmodeManager.registerMode(MODE_BORDER, [_interaction_resizeInteraction__WEBPACK_IMPORTED_MODULE_11__["default"], _interaction_wheelZoomInteraction__WEBPACK_IMPORTED_MODULE_4__["default"]]);\n/* harmony default export */ __webpack_exports__["default"] = (modeManager);\n\n//# sourceURL=webpack:///./src/graphics/mode/modes.ts?')},"./src/graphics/node/CircleCanvasNode.ts":
/*!***********************************************!*\
  !*** ./src/graphics/node/CircleCanvasNode.ts ***!
  \***********************************************/
/*! exports provided: CircleCanvasNode, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CircleCanvasNode", function() { return CircleCanvasNode; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _graph_CanvasNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../graph/CanvasNode */ "./src/graphics/graph/CanvasNode.ts");\n/* harmony import */ var _shape_CircleShape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shape/CircleShape */ "./src/graphics/shape/CircleShape.ts");\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n/* harmony import */ var _utils_math2d__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/math2d */ "./src/graphics/utils/math2d.ts");\n/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/utils */ "./src/graphics/utils/utils.ts");\n\n\n\n\n\n\nclass CircleCanvasNode extends _graph_CanvasNode__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  get boundingJoinPoints() {\n    return this.getBoundingJoinPoints();\n  }\n\n  get boundingRect() {\n    return this.getBoundingRect();\n  }\n\n  get centerPoint() {\n    return this.getCenterPoint();\n  }\n\n  get vertexes() {\n    return this.getBoundingRect();\n  }\n\n  constructor(options) {\n    super(options);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "shapeType", \'circle\');\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "radius", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "minRadius", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "text", void 0);\n\n    this.radius = options.radius || 50;\n    this.minRadius = options.minRadius || 30;\n    this.text = options.text || \'\';\n  }\n\n  isPointIn() {\n    const {\n      canvas,\n      centerPoint,\n      radius\n    } = this;\n    if (!canvas) return false;\n    if (!canvas.nativeEvent) return false;\n    const event = canvas.nativeEvent;\n    const point = canvas.viewportToPixelCoordinate(new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["default"](event.clientX, event.clientY));\n    return _utils_math2d__WEBPACK_IMPORTED_MODULE_4__["default"].isPointInCircle(point, centerPoint, radius);\n  }\n\n  render() {\n    const {\n      radius,\n      canvas,\n      active\n    } = this;\n    if (!canvas) return;\n    const diameter = 2 * radius;\n    this.cacheCanvas.width = diameter + 2;\n    this.cacheCanvas.height = diameter + 2;\n    const ctx = this.cacheCanvas.getContext(\'2d\');\n    ctx.beginPath();\n    ctx.arc(radius + 1, radius + 1, radius, 0, 2 * Math.PI);\n    ctx.strokeStyle = \'#29c1f8\';\n    ctx.fillStyle = \'#fff\';\n    ctx.lineWidth = 2;\n    ctx.stroke();\n    ctx.fill();\n\n    if (this.text) {\n      ctx.textBaseline = \'middle\';\n      ctx.textAlign = \'center\';\n      ctx.font = "14px serif";\n      ctx.fillStyle = \'#29c1f8\';\n      ctx.fillText(this.text, radius + 1, radius + 1);\n    }\n\n    canvas.repaint = true;\n  }\n\n  update() {\n    if (!this.canvas) return;\n    const {\n      graphCanvasCtx\n    } = this.canvas;\n    const {\n      x,\n      y\n    } = this.getPosition();\n    graphCanvasCtx.save();\n\n    if (this.active) {\n      graphCanvasCtx.shadowBlur = 5;\n      graphCanvasCtx.shadowColor = \'rgba(255,0,0,0.8)\';\n    }\n\n    graphCanvasCtx.drawImage(this.cacheCanvas, x - 1, y - 1);\n    graphCanvasCtx.restore();\n  } // CircleShape mixins\n\n\n  getBoundingJoinPoints() {\n    return [];\n  }\n\n  getBoundingRect() {\n    return [];\n  }\n\n  getCenterPoint() {\n    return new _utils_vector2d__WEBPACK_IMPORTED_MODULE_3__["default"](0, 0);\n  }\n\n}\nObject(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["applyMixins"])(CircleCanvasNode, [_shape_CircleShape__WEBPACK_IMPORTED_MODULE_2__["default"]]);\n/* harmony default export */ __webpack_exports__["default"] = (CircleCanvasNode);\n\n//# sourceURL=webpack:///./src/graphics/node/CircleCanvasNode.ts?')},"./src/graphics/node/CircleGroup.ts":
/*!******************************************!*\
  !*** ./src/graphics/node/CircleGroup.ts ***!
  \******************************************/
/*! exports provided: CircleGroup, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CircleGroup", function() { return CircleGroup; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _CircleCanvasNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CircleCanvasNode */ "./src/graphics/node/CircleCanvasNode.ts");\n\n\n/**\r\n * 圆形组\r\n */\n\nclass CircleGroup extends _CircleCanvasNode__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  constructor(...args) {\n    super(...args);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "isGroup", true);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "canResize", true);\n  }\n\n  render() {}\n\n  update() {\n    if (!this.canvas) return;\n    const {\n      graphCanvasCtx\n    } = this.canvas;\n    const {\n      x,\n      y\n    } = this.getPosition();\n    graphCanvasCtx.beginPath();\n    graphCanvasCtx.arc(x + this.radius, y + this.radius, this.radius, 0, 2 * Math.PI); // graphCanvasCtx.drawImage(this.cacheCanvas, x - 2, y - 2)\n\n    graphCanvasCtx.save();\n\n    if (this.active) {\n      graphCanvasCtx.shadowBlur = 5;\n      graphCanvasCtx.shadowColor = \'rgba(255,0,0,0.8)\';\n    }\n\n    graphCanvasCtx.strokeStyle = \'#066df2\';\n    graphCanvasCtx.stroke();\n    graphCanvasCtx.restore();\n  }\n\n}\n/* harmony default export */ __webpack_exports__["default"] = (CircleGroup);\n\n//# sourceURL=webpack:///./src/graphics/node/CircleGroup.ts?')},"./src/graphics/node/RectCanvasNode.ts":
/*!*********************************************!*\
  !*** ./src/graphics/node/RectCanvasNode.ts ***!
  \*********************************************/
/*! exports provided: RectCanvasNode, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RectCanvasNode", function() { return RectCanvasNode; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _graph_CanvasNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../graph/CanvasNode */ "./src/graphics/graph/CanvasNode.ts");\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n/* harmony import */ var _utils_math2d__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/math2d */ "./src/graphics/utils/math2d.ts");\n\n\n\n\nclass RectCanvasNode extends _graph_CanvasNode__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  /**\r\n   * 计算宽度\r\n   */\n  get width() {\n    return this.isExpanded ? this._width : this.collapseWidth;\n  }\n\n  set width(width) {\n    this._width = width;\n  }\n\n  /**\r\n   * 计算高度\r\n   */\n  get height() {\n    return this.isExpanded ? this._height : this.collapseHeight;\n  }\n\n  set height(height) {\n    this._height = height;\n  }\n\n  constructor(options) {\n    super(options);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "shapeType", \'rect\');\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_width", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_height", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "minWidth", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "minHeight", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "collapseWidth", 50);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "collapseHeight", 50);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "text", void 0);\n\n    this._width = options.width || 100;\n    this._height = options.height || 100;\n    this.minWidth = options.minWidth || 30;\n    this.minHeight = options.minHeight || 30;\n    this.text = options.text || \'\';\n  }\n\n  get vertexes() {\n    return this.getBoundingRect();\n  }\n\n  get boundingRect() {\n    return this.getBoundingRect();\n  }\n\n  get boundingJoinPoints() {\n    return this.getBoundingJoinPoints();\n  }\n\n  get centerPoint() {\n    return this.getCenterPoint();\n  }\n\n  getPosition() {\n    if (\n    /* 展开状态 */\n    this.isExpanded) {\n      return this.position;\n    }\n    /* 折叠状态 */\n    else {\n        const {\n          x,\n          y\n        } = this.position;\n        return new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x + (this._width - this.collapseWidth) / 2, y + (this._height - this.collapseHeight) / 2);\n      }\n  }\n\n  isPointIn() {\n    const {\n      canvas\n    } = this;\n    if (!canvas) return false;\n    if (!canvas.nativeEvent) return false;\n    const event = canvas.nativeEvent;\n    const point = canvas.viewportToPixelCoordinate(new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](event.clientX, event.clientY));\n    return _utils_math2d__WEBPACK_IMPORTED_MODULE_3__["default"].isPointInRect(point, this.getPosition(), this.width, this.height);\n  }\n\n  get joinPoint() {\n    const {\n      x,\n      y\n    } = this.getPosition();\n    return new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x + this.width / 2, y + this.height / 2);\n  }\n  /**\r\n   * 边界矩形坐标数组\r\n   */\n\n\n  getBoundingRect() {\n    const {\n      width,\n      height\n    } = this;\n    const {\n      x,\n      y\n    } = this.getPosition();\n    return [new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x, y), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x + width, y), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x + width, y + height), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x, y + height)];\n  }\n  /**\r\n   * 边界矩形上的连接点坐标数组\r\n   */\n\n\n  getBoundingJoinPoints() {\n    const {\n      width,\n      height\n    } = this;\n    const {\n      x,\n      y\n    } = this.getPosition();\n    return [new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x + width / 2, y), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x + width, y + height / 2), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x + width / 2, y + height), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x, y + height / 2)];\n  }\n  /**\r\n   * 几何中点坐标\r\n   */\n\n\n  getCenterPoint() {\n    const {\n      width,\n      height\n    } = this;\n    const {\n      x,\n      y\n    } = this.getPosition();\n    return new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x + width / 2, y + height / 2);\n  }\n  /**\r\n   * 是否在矩形中\r\n   * @param points \r\n   */\n\n\n  isInRect(points) {\n    const vertexes = this.getBoundingRect(); // 左\n\n    if (points[0].x > vertexes[2].x) return false; // 右\n\n    if (points[2].x < vertexes[0].x) return false; // 上\n\n    if (points[0].y > vertexes[2].y) return false; // 下\n\n    if (points[2].y < vertexes[0].y) return false;\n    return true;\n  }\n  /**\r\n   * 是否包含于某矩形\r\n   * @param rect \r\n   */\n\n\n  isWrappedInRect(rect) {\n    const vertexes = this.getBoundingRect();\n    return rect[0].x <= vertexes[0].x && rect[0].y <= vertexes[0].y && rect[2].x >= vertexes[2].x && rect[2].y >= vertexes[2].y;\n  }\n\n  render() {\n    if (!this.canvas) return;\n    const ctx = this.cacheCanvas.getContext(\'2d\');\n    this.cacheCanvas.width = this.width + 4;\n    this.cacheCanvas.height = this.height + 4;\n    ctx.rect(2, 2, this.width, this.height);\n    ctx.strokeStyle = \'#29c1f8\';\n    ctx.fillStyle = \'#fff\';\n    ctx.lineWidth = 1;\n    ctx.fill();\n    ctx.stroke();\n    ctx.textBaseline = \'middle\';\n    ctx.textAlign = \'center\';\n    ctx.font = "14px serif";\n    ctx.fillStyle = \'#29c1f8\';\n    ctx.fillText(this.text, this.width / 2 + 2, this.height / 2 + 2);\n    this.canvas.repaint = true;\n  }\n\n  update() {\n    if (!this.canvas) return;\n    const {\n      graphCanvasCtx\n    } = this.canvas;\n    const {\n      x,\n      y\n    } = this.getPosition();\n    graphCanvasCtx.save();\n\n    if (this.active) {\n      graphCanvasCtx.shadowBlur = 5;\n      graphCanvasCtx.shadowColor = \'rgba(255,0,0,0.8)\';\n    }\n\n    graphCanvasCtx.drawImage(this.cacheCanvas, x - 2, y - 2);\n    graphCanvasCtx.restore();\n  }\n\n}\n/* harmony default export */ __webpack_exports__["default"] = (RectCanvasNode);\n\n//# sourceURL=webpack:///./src/graphics/node/RectCanvasNode.ts?')},"./src/graphics/node/RectDomNode.ts":
/*!******************************************!*\
  !*** ./src/graphics/node/RectDomNode.ts ***!
  \******************************************/
/*! exports provided: RectDomNode, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RectDomNode", function() { return RectDomNode; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _graph_DomNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../graph/DomNode */ "./src/graphics/graph/DomNode.ts");\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n/* harmony import */ var _utils_math2d__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/math2d */ "./src/graphics/utils/math2d.ts");\n\n\n\n\nclass RectDomNode extends _graph_DomNode__WEBPACK_IMPORTED_MODULE_1__["default"] {\n  /**\r\n   * 计算宽度\r\n   */\n  get width() {\n    return this.isExpanded ? this._width : this.collapseWidth;\n  }\n\n  set width(width) {\n    this._width = width;\n  }\n\n  /**\r\n   * 计算高度\r\n   */\n  get height() {\n    return this.isExpanded ? this._height : this.collapseHeight;\n  }\n\n  set height(height) {\n    this._height = height;\n  }\n\n  get vertexes() {\n    return this.getBoundingRect();\n  }\n\n  get joinPoint() {\n    return this.getCenterPoint();\n  }\n\n  get boundingRect() {\n    return this.getBoundingRect();\n  }\n\n  get boundingJoinPoints() {\n    return this.getBoundingJoinPoints();\n  }\n\n  get centerPoint() {\n    return this.getCenterPoint();\n  }\n\n  constructor(options) {\n    super(options);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "shapeType", \'rect\');\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_width", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_height", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "minWidth", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "minHeight", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "collapseWidth", 50);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "collapseHeight", 50);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "text", void 0);\n\n    this._width = options.width || 100;\n    this._height = options.height || 100;\n    this.minWidth = options.minWidth || 30;\n    this.minHeight = options.minHeight || 30;\n    this.text = options.text || \'\';\n  }\n\n  getPosition() {\n    if (\n    /* 展开状态 */\n    this.isExpanded) {\n      return this.position;\n    }\n    /* 折叠状态 */\n    else {\n        const {\n          x,\n          y\n        } = this.position;\n        return new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x + (this._width - this.collapseWidth) / 2, y + (this._height - this.collapseHeight) / 2);\n      }\n  }\n\n  isPointIn() {\n    const {\n      canvas\n    } = this;\n    if (!canvas) return false;\n    if (!canvas.nativeEvent) return false;\n    const event = canvas.nativeEvent;\n    const point = canvas.viewportToPixelCoordinate(new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](event.clientX, event.clientY));\n    return _utils_math2d__WEBPACK_IMPORTED_MODULE_3__["default"].isPointInRect(point, this.getPosition(), this.width, this.height);\n  }\n  /**\r\n   * 边界矩形坐标数组\r\n   */\n\n\n  getBoundingRect() {\n    const {\n      width,\n      height\n    } = this;\n    const {\n      x,\n      y\n    } = this.getPosition();\n    return [new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x, y), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x + width, y), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x + width, y + height), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x, y + height)];\n  }\n  /**\r\n   * 边界矩形上的连接点坐标数组\r\n   */\n\n\n  getBoundingJoinPoints() {\n    const {\n      width,\n      height\n    } = this;\n    const {\n      x,\n      y\n    } = this.getPosition();\n    return [new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x + width / 2, y), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x + width, y + height / 2), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x + width / 2, y + height), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x, y + height / 2)];\n  }\n  /**\r\n   * 几何中点坐标\r\n   */\n\n\n  getCenterPoint() {\n    const {\n      width,\n      height\n    } = this;\n    const {\n      x,\n      y\n    } = this.getPosition();\n    return new _utils_vector2d__WEBPACK_IMPORTED_MODULE_2__["default"](x + width / 2, y + height / 2);\n  }\n  /**\r\n   * 是否在矩形中\r\n   * @param points \r\n   */\n\n\n  isInRect(points) {\n    const vertexes = this.getBoundingRect(); // 左\n\n    if (points[0].x > vertexes[2].x) return false; // 右\n\n    if (points[2].x < vertexes[0].x) return false; // 上\n\n    if (points[0].y > vertexes[2].y) return false; // 下\n\n    if (points[2].y < vertexes[0].y) return false;\n    return true;\n  }\n  /**\r\n   * 是否包含于某矩形\r\n   * @param rect \r\n   */\n\n\n  isWrappedInRect(rect) {\n    const vertexes = this.getBoundingRect();\n    return rect[0].x <= vertexes[0].x && rect[0].y <= vertexes[0].y && rect[2].x >= vertexes[2].x && rect[2].y >= vertexes[2].y;\n  }\n\n  render() {\n    this.$el.innerHTML = `<div style="height:100%;\n                                      display:flex;\n                                      align-items:center;\n                                      justify-content:center;\n                                      border:1px solid #29c1f8;\n                                      box-sizing: border-box;\n                                      font-size:12px;\n                                      user-select: none;\n                                      color:#29c1f8;">${this.text}</div>`;\n  }\n\n  update() {\n    const {\n      x,\n      y\n    } = this.getPosition();\n    const {\n      width,\n      height,\n      active\n    } = this;\n    Object.assign(this.$el.style, {\n      transform: `translate3d(${x}px,${y}px,0)`,\n      width: `${width}px`,\n      height: `${height}px`,\n      boxShadow: active ? \'0 0 5px 0 rgba(255,0,0,0.8)\' : \'none\'\n    });\n  }\n\n} // applyMixins(RectDomNode, [RectShape])\n\n/* harmony default export */ __webpack_exports__["default"] = (RectDomNode);\n\n//# sourceURL=webpack:///./src/graphics/node/RectDomNode.ts?')},"./src/graphics/node/RectGroup.ts":
/*!****************************************!*\
  !*** ./src/graphics/node/RectGroup.ts ***!
  \****************************************/
/*! exports provided: RectGroup, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RectGroup", function() { return RectGroup; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _RectCanvasNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RectCanvasNode */ "./src/graphics/node/RectCanvasNode.ts");\n\n\n\n/**\r\n * 矩形组\r\n */\nclass RectGroup extends _RectCanvasNode__WEBPACK_IMPORTED_MODULE_1__["RectCanvasNode"] {\n  constructor(...args) {\n    super(...args);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "isGroup", true);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "canResize", true);\n  }\n\n  render() {// const ctx = this.cacheCanvas.getContext(\'2d\') as CanvasRenderingContext2D\n    // this.cacheCanvas.width = this.width + 4\n    // this.cacheCanvas.height = this.height + 4\n    // ctx.rect(2, 2, this.width, this.height)\n    // ctx.strokeStyle = \'#066df2\'\n    // ctx.stroke()\n  }\n\n  update() {\n    if (!this.canvas) return;\n    const {\n      graphCanvasCtx\n    } = this.canvas;\n    const {\n      x,\n      y\n    } = this.getPosition();\n    const center = this.centerPoint;\n    graphCanvasCtx.beginPath();\n    graphCanvasCtx.rect(x, y, this.width, this.height);\n\n    if (!this.isExpanded) {\n      graphCanvasCtx.moveTo(center.x, center.y - 10);\n      graphCanvasCtx.lineTo(center.x, center.y + 10);\n      graphCanvasCtx.moveTo(center.x - 10, center.y);\n      graphCanvasCtx.lineTo(center.x + 10, center.y);\n    } // graphCanvasCtx.drawImage(this.cacheCanvas, x - 2, y - 2)\n\n\n    graphCanvasCtx.save();\n\n    if (this.active) {\n      graphCanvasCtx.shadowBlur = 5;\n      graphCanvasCtx.shadowColor = \'rgba(255,0,0,0.8)\';\n    }\n\n    graphCanvasCtx.strokeStyle = \'#066df2\';\n    graphCanvasCtx.stroke();\n    graphCanvasCtx.restore();\n  }\n\n}\n/* harmony default export */ __webpack_exports__["default"] = (RectGroup);\n\n//# sourceURL=webpack:///./src/graphics/node/RectGroup.ts?')},"./src/graphics/shape/CircleShape.ts":
/*!*******************************************!*\
  !*** ./src/graphics/shape/CircleShape.ts ***!
  \*******************************************/
/*! exports provided: CircleShape, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CircleShape", function() { return CircleShape; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/vector2d */ "./src/graphics/utils/vector2d.ts");\n\n\nclass CircleShape {\n  constructor() {\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "position", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "radius", void 0);\n  }\n\n  /**\r\n   * 边界矩形坐标数组\r\n   */\n  getBoundingRect() {\n    const {\n      radius,\n      position: {\n        x,\n        y\n      }\n    } = this;\n    const diameter = 2 * radius;\n    return [new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["default"](x, y), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["default"](x + diameter, y), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["default"](x + diameter, y + diameter), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["default"](x, y + diameter)];\n  }\n  /**\r\n   * 边界矩形上的连接点坐标数组\r\n   */\n\n\n  getBoundingJoinPoints() {\n    const {\n      radius,\n      position: {\n        x,\n        y\n      }\n    } = this;\n    const diameter = 2 * radius;\n    return [new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["default"](x + radius, y), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["default"](x + diameter, y + radius), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["default"](x + radius, y + diameter), new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["default"](x, y + radius)];\n  }\n  /**\r\n   * 几何中点坐标\r\n   */\n\n\n  getCenterPoint() {\n    const {\n      position: {\n        x,\n        y\n      },\n      radius\n    } = this;\n    return new _utils_vector2d__WEBPACK_IMPORTED_MODULE_1__["default"](x + radius, y + radius);\n  }\n  /**\r\n   * 是否相交于某矩形\r\n   * @param points \r\n   */\n\n\n  isInRect(points) {\n    const vertexes = this.getBoundingRect(); // 左\n\n    if (points[0].x > vertexes[2].x) return false; // 右\n\n    if (points[2].x < vertexes[0].x) return false; // 上\n\n    if (points[0].y > vertexes[2].y) return false; // 下\n\n    if (points[2].y < vertexes[0].y) return false;\n    return true;\n  }\n  /**\r\n   * 是否包含于某矩形\r\n   * @param rect \r\n   */\n\n\n  isWrappedInRect(rect) {\n    const vertexes = this.getBoundingRect();\n    return rect[0].x <= vertexes[0].x && rect[0].y <= vertexes[0].y && rect[2].x >= vertexes[2].x && rect[2].y >= vertexes[2].y;\n  }\n\n}\n/* harmony default export */ __webpack_exports__["default"] = (CircleShape);\n\n//# sourceURL=webpack:///./src/graphics/shape/CircleShape.ts?')},"./src/graphics/utils/math2d.ts":
/*!**************************************!*\
  !*** ./src/graphics/utils/math2d.ts ***!
  \**************************************/
/*! exports provided: Math2d, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Math2d", function() { return Math2d; });\n/* harmony import */ var _vector2d__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vector2d */ "./src/graphics/utils/vector2d.ts");\n\nclass Math2d {\n  /**\r\n   * 判断点是否在矩形内\r\n   * @param P \r\n   * @param rectPosition \r\n   * @param width \r\n   * @param height \r\n   */\n  static isPointInRect(P, rectPosition, width, height) {\n    if (P.x < rectPosition.x) return false;\n    if (P.y < rectPosition.y) return false;\n    if (P.x > rectPosition.x + width) return false;\n    if (P.y > rectPosition.y + height) return false;\n    return true;\n  }\n  /**\r\n   * 判断点是否在圆内\r\n   * @param P \r\n   * @param C \r\n   * @param radius \r\n   */\n\n\n  static isPointInCircle(P, C, radius) {\n    return _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(C).substract(P).magnitude <= radius;\n  }\n  /**\r\n   * 判断点是否在三角形内\r\n   * @param point \r\n   * @param v0 \r\n   * @param v1 \r\n   * @param v2 \r\n   */\n\n\n  static isPointInTriangle(P, A, B, C) {\n    const PA = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(A).substract(P);\n    const PB = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(B).substract(P);\n    const PC = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(C).substract(P);\n    const b1 = PA.crossProduct(PB) < 0;\n    const b2 = PB.crossProduct(PC) < 0;\n    const b3 = PC.crossProduct(PA) < 0;\n    return b1 === b2 && b2 === b3;\n  }\n  /**\r\n   * 判断点是否在多边形内\r\n   * @param P \r\n   * @param points \r\n   */\n\n\n  static isPointInPolygon(P, points) {\n    if (points.length < 3) return false;\n\n    for (let i = 2; i < points.length; i++) {\n      if (Math2d.isPointInTriangle(P, points[0], points[i - 1], points[i])) return true;\n    }\n\n    return false;\n  }\n  /**\r\n   * 判断点是否在线段上\r\n   * @param P \r\n   * @param lineSegment \r\n   * @param deviation 计算偏差 最小为0\r\n   */\n\n\n  static isPointInLineSegment(P, lineSegment, deviation = 0.01) {\n    const A = lineSegment[0];\n    const B = lineSegment[1];\n    const AP = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(P).substract(A);\n    const BP = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(P).substract(B);\n    const BA = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(A).substract(B);\n\n    if (AP.magnitude + BP.magnitude - BA.magnitude < deviation) {\n      return true;\n    }\n\n    return false;\n  }\n  /**\r\n   * 判断点是否在多线段上\r\n   * @param P \r\n   * @param polyline \r\n   * @param deviation \r\n   */\n\n\n  static isPointInPolyline(P, polyline, deviation = 0.01) {\n    const length = polyline.length;\n    if (length < 2) return false;\n\n    for (let i = 1; i < length; i++) {\n      if (Math2d.isPointInLineSegment(P, [polyline[i - 1], polyline[i]], deviation)) return true;\n    }\n\n    return false;\n  }\n  /**\r\n   * 判断两条线是否相交\r\n   * @param line1 \r\n   * @param line2 \r\n   */\n\n\n  static isIntersect(line1, line2) {\n    const A = line1[0];\n    const B = line1[1];\n    const C = line2[0];\n    const D = line2[1];\n    if (Math2d.isPointInLineSegment(A, line2)) return true;\n    if (Math2d.isPointInLineSegment(B, line2)) return true;\n    if (Math2d.isPointInLineSegment(C, line1)) return true;\n    if (Math2d.isPointInLineSegment(D, line1)) return true;\n    const AC = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(C).substract(A);\n    const AD = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(D).substract(A);\n    const BC = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(C).substract(B);\n    const BD = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(D).substract(B);\n    const b1 = AC.crossProduct(AD) < 0;\n    const b2 = BC.crossProduct(BD) < 0;\n    if (b1 === b2) return false;\n    const CA = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(A).substract(C);\n    const CB = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(B).substract(C);\n    const DA = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(A).substract(D);\n    const DB = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(B).substract(D);\n    const b3 = CA.crossProduct(CB) < 0;\n    const b4 = DA.crossProduct(DB) < 0;\n    if (b3 === b4) return false;\n    return true;\n  }\n  /**\r\n   * 获取两条相交线段的交点\r\n   * @param line1 \r\n   * @param line2 \r\n   */\n\n\n  static getLineIntersect(line1, line2) {\n    const A = line1[0];\n    const B = line1[1];\n    const C = line2[0];\n    const D = line2[1];\n    const AB = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(B).substract(A);\n    const CD = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(D).substract(C);\n    const perpendicular = CD.perpendicular(); // C,A,B 在perpendicular的投影  a----c-----\x3eb\n\n    const c = C.project(perpendicular);\n    const a = A.project(perpendicular);\n    const b = B.project(perpendicular);\n    const ac = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(c).substract(a);\n    const cb = _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(b).substract(c); // 设交点P,则AP的模\n\n    const magnitude = AB.magnitude * ac.magnitude / (ac.magnitude + cb.magnitude);\n    const AP = AB.normalize().scale(magnitude);\n    return AP.add(A);\n  }\n  /**\r\n   * 根据ratio,获取线段上点的坐标,起点为0,终点为1\r\n   * @param line \r\n   * @param ratio \r\n   */\n\n\n  static getLinePoint(line, ratio) {\n    const len = line.length;\n    if (len < 2) return null;\n    if (ratio > 1) ratio = 1;\n    if (ratio < 0) ratio = 0;\n    const length = Math2d.getPolyLineLength(line) * ratio;\n    let sum = 0;\n\n    for (let i = 1; i < len; i++) {\n      sum += line[i].distance(line[i - 1]);\n\n      if (sum >= length) {\n        const diff = sum - length;\n        return _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(line[i]).add(_vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"].copy(line[i - 1]).substract(line[i]).normalize().scale(diff));\n      }\n    }\n\n    return new _vector2d__WEBPACK_IMPORTED_MODULE_0__["Vector2d"](0, 0);\n  }\n  /**\r\n   * 获取多线段的长度\r\n   * @param line \r\n   */\n\n\n  static getPolyLineLength(line) {\n    const length = line.length;\n    if (length < 2) return 0;\n    let sum = 0;\n\n    for (let i = 1; i < length; i++) {\n      sum += line[i].distance(line[i - 1]);\n    }\n\n    return sum;\n  }\n\n} // let count = 10000\n// const before = Date.now()\n// const p = new Vector2d(-10, 10)\n// const a = new Vector2d(10, 10)\n// const b = new Vector2d(-10, -10)\n// const c = new Vector2d(10, -10)\n// while (count--) {\n//   Math2d.getLineIntersect([p, c], [a, b])\n// }\n// console.log(Date.now() - before)\n\n/* harmony default export */ __webpack_exports__["default"] = (Math2d);\n\n//# sourceURL=webpack:///./src/graphics/utils/math2d.ts?')},"./src/graphics/utils/tree.ts":
/*!************************************!*\
  !*** ./src/graphics/utils/tree.ts ***!
  \************************************/
/*! exports provided: TreeNode, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TreeNode", function() { return TreeNode; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n\nclass TreeNode {\n  constructor(id, data, parent) {\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "id", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "data", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "children", []);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parent", void 0);\n\n    this.id = id;\n    this.data = data;\n\n    if (parent) {\n      parent.addChild(this);\n    }\n  }\n  /**\r\n   * 在最后追加子节点\r\n   * @param child \r\n   */\n\n\n  addChild(child) {\n    return this.addChildAt(child, this.children.length);\n  }\n  /**\r\n   * 在指定位置追加子节点\r\n   * @param child \r\n   * @param index \r\n   */\n\n\n  addChildAt(child, index) {\n    if (index >= 0 && index <= this.children.length) {\n      child.parent = this;\n      this.children.splice(index, 0, child);\n      return child;\n    } else {\n      return undefined;\n    }\n  }\n  /**\r\n   * 根据id获取子节点\r\n   * @param id \r\n   */\n\n\n  getChildById(id) {\n    return this.children.find(child => child.id === id);\n  }\n  /**\r\n   * 遍历子孙节点，深度优先\r\n   * @param handler \r\n   */\n\n\n  getDescendantDF(handler) {\n    const descendants = [];\n    const stack = [...this.children];\n\n    while (stack.length) {\n      const last = stack.pop();\n      descendants.push(last);\n      stack.push(...last.children);\n\n      if (handler && handler(last)) {\n        break;\n      }\n    }\n\n    return descendants;\n  }\n  /**\r\n   * 遍历子孙节点，广度优先\r\n   */\n\n\n  getDescendantBF(handler) {\n    const descendants = [];\n    const queue = [...this.children];\n\n    while (queue.length) {\n      const first = queue.shift();\n      descendants.push(first);\n      queue.push(...first.children);\n\n      if (handler && handler(first)) {\n        break;\n      }\n    }\n\n    return descendants;\n  }\n  /**\r\n   * 获取根节点\r\n   */\n\n\n  get root() {\n    let cur = this;\n\n    while (cur.parent !== undefined) {\n      cur = cur.parent;\n    }\n\n    return cur;\n  }\n  /**\r\n   * 获取节点深度\r\n   */\n\n\n  get depth() {\n    let depth = 0;\n    let cur = this;\n\n    while (cur.parent !== undefined) {\n      cur = cur.parent;\n      depth++;\n    }\n\n    return depth;\n  }\n  /**\r\n   * 获取第一个子节点\r\n   */\n\n\n  get firstChild() {\n    return this.children[0];\n  }\n  /**\r\n   * 获取最后一个子节点\r\n   */\n\n\n  get lastChild() {\n    return this.children[this.children.length - 1];\n  }\n\n}\n/* harmony default export */ __webpack_exports__["default"] = (TreeNode);\n\n//# sourceURL=webpack:///./src/graphics/utils/tree.ts?')},"./src/graphics/utils/utils.ts":
/*!*************************************!*\
  !*** ./src/graphics/utils/utils.ts ***!
  \*************************************/
/*! exports provided: throttle, imgLoad, applyMixins */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "throttle", function() { return throttle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "imgLoad", function() { return imgLoad; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyMixins", function() { return applyMixins; });\n/**\r\n * 节流函数\r\n * @param func\r\n */\nfunction throttle(func) {\n  let running = false;\n  return function (...params) {\n    if (running) return;\n    running = true;\n    func(...params);\n    requestAnimationFrame(() => {\n      running = false;\n    });\n  };\n}\n/**\r\n * 图片加载器\r\n * @param src\r\n */\n\nfunction imgLoad(src) {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.src = src;\n\n    img.onload = () => {\n      resolve(img);\n    };\n\n    img.onerror = () => {\n      reject();\n    };\n  });\n}\n/**\r\n * 原型混入\r\n * @param derivedCtor 获得混入属性的构造函数\r\n * @param baseCtors 提供混入属性的构造函数列表\r\n */\n\nfunction applyMixins(derivedCtor, baseCtors) {\n  baseCtors.forEach(baseCtor => {\n    Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\n      if (name === \'constructor\') return;\n      derivedCtor.prototype[name] = baseCtor.prototype[name];\n    });\n  });\n}\n\n//# sourceURL=webpack:///./src/graphics/utils/utils.ts?')},"./src/graphics/utils/vector2d.ts":
/*!****************************************!*\
  !*** ./src/graphics/utils/vector2d.ts ***!
  \****************************************/
/*! exports provided: Vector2d, default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Vector2d", function() { return Vector2d; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n\nclass Vector2d {\n  static copy(target) {\n    if (copyIndex > copys.length - 1) {\n      copyIndex = 0;\n    }\n\n    return copys[copyIndex++].copy(target);\n  }\n\n  constructor(x = 0, y = 0) {\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "x", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "y", void 0);\n\n    this.x = x;\n    this.y = y;\n  }\n\n  get magnitude() {\n    return this.getMagnitude();\n  }\n  /**\r\n   * 取模\r\n   */\n\n\n  getMagnitude() {\n    if (this.x === 0 && this.y === 0) {\n      return 0.000000001;\n    }\n\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n  /**\r\n   * 矢量加\r\n   * @param target \r\n   */\n\n\n  add(target) {\n    this.x += target.x;\n    this.y += target.y;\n    return this;\n  }\n  /**\r\n   * 矢量减\r\n   * @param target \r\n   */\n\n\n  substract(target) {\n    this.x -= target.x;\n    this.y -= target.y;\n    return this;\n  }\n  /**\r\n   * 点积\r\n   * @param target \r\n   */\n\n\n  dotProduct(target) {\n    return this.x * target.x + this.y * target.y;\n  }\n  /**\r\n   * 叉积\r\n   * @param target \r\n   */\n\n\n  crossProduct(target) {\n    return this.x * target.y - this.y * target.x;\n  }\n  /**\r\n   * 与标量的积\r\n   * @param scalar \r\n   */\n\n\n  scale(scalar) {\n    this.x *= scalar;\n    this.y *= scalar;\n    return this;\n  }\n  /**\r\n   * 求边缘向量,返回新向量\r\n   */\n\n\n  edge(target) {\n    return this.clone().substract(target);\n  }\n  /**\r\n   * 求正交向量,返回新向量\r\n   */\n\n\n  perpendicular() {\n    return new Vector2d(this.y, -this.x);\n  }\n  /**\r\n   * 求单位向量,返回新向量\r\n   */\n\n\n  normalize() {\n    const magnitude = this.getMagnitude();\n    return new Vector2d(this.x / magnitude, this.y / magnitude);\n  }\n  /**\r\n   * 求法向量,返回新向量\r\n   */\n\n\n  normal() {\n    return this.perpendicular().normalize();\n  }\n  /**\r\n   * 求与目标向量的夹角余弦值\r\n   * @param target \r\n   */\n\n\n  cosAngle(target) {\n    return this.dotProduct(target) / (this.magnitude * target.magnitude);\n  }\n  /**\r\n   * 求与目标向量的夹角 弧度值\r\n   * @param target \r\n   */\n\n\n  angle(target) {\n    return Math.acos(this.cosAngle(target));\n  }\n  /**\r\n   * 与x轴夹角(顺时针为正) [-Math.PI,Math.PI]\r\n   */\n\n\n  xAxisAngle() {\n    const angle = this.angle(Vector2d.xAxis);\n    return this.y > 0 ? angle : -angle;\n  }\n  /**\r\n   * 对向量进行旋转(参数为弧度值)\r\n   * @param deg \r\n   */\n\n\n  rotate(deg) {\n    const {\n      x,\n      y\n    } = this;\n    this.x = x * Math.cos(deg) - y * Math.sin(deg);\n    this.y = x * Math.sin(deg) + y * Math.cos(deg);\n    return this;\n  }\n  /**\r\n   * 在目标向量上的投影,返回新向量\r\n   * @param target \r\n   */\n\n\n  project(target) {\n    const magnitude = this.dotProduct(target) / target.magnitude;\n    return target.normalize().scale(magnitude);\n  }\n  /**\r\n   * 是否与目标向量相等\r\n   * @param target \r\n   */\n\n\n  equal(target) {\n    return this.x === target.x && this.y === target.y;\n  }\n  /**\r\n   * 与目标向量的距离\r\n   * @param target \r\n   */\n\n\n  distance(target) {\n    return this.edge(target).magnitude;\n  }\n  /**\r\n   * 复制目标向量\r\n   * @param target \r\n   */\n\n\n  copy(target) {\n    this.x = target.x;\n    this.y = target.y;\n    return this;\n  }\n  /**\r\n   * 克隆,复制当前向量返回新的向量\r\n   */\n\n\n  clone() {\n    return new Vector2d(this.x, this.y);\n  }\n\n} // 用于copy向量(优化)\n\n_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Vector2d, "xAxis", new Vector2d(1, 0));\n\n_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Vector2d, "yAxis", new Vector2d(0, 1));\n\nlet copyIndex = 0;\nlet copyCount = 200;\nconst copys = [];\n\nwhile (copyCount--) {\n  copys.push(new Vector2d());\n}\n\n/* harmony default export */ __webpack_exports__["default"] = (Vector2d);\n\n//# sourceURL=webpack:///./src/graphics/utils/vector2d.ts?')}})},module.exports=factory()},function(e,n,t){"use strict";t.r(n);var r=t(0);console.dir(r.RectDomNode);const _=new class extends r.RectDomNode{constructor(e){super(e)}}({});console.log(_)}],[[1,1]]]);